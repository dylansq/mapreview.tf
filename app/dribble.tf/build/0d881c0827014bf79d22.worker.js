/*! For license information please see 0d881c0827014bf79d22.worker.js.LICENSE.txt */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./demo/",r(r.s=92)}([function(e,t,r){var n=r(22);e.exports=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=n(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw i}}}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Sigon=1]="Sigon",e[e.Packet=2]="Packet",e[e.SyncTick=3]="SyncTick",e[e.ConsoleCmd=4]="ConsoleCmd",e[e.UserCmd=5]="UserCmd",e[e.DataTables=6]="DataTables",e[e.Stop=7]="Stop",e[e.StringTables=8]="StringTables"}(t.MessageType||(t.MessageType={}))},function(e,t,r){"use strict";var n=r(1),a=r(2);Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,r,a){n(this,e),this.x=t,this.y=r,this.z=a}return a(e,null,[{key:"areEqual",value:function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}}]),e}();t.Vector=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logBase2=function(e){var t=0;for(e>>=1;0!==e&&t<32;)t++,e>>=1;return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5);function a(e,t){if(t){var r=e<0?1:0;return((e^-r)<<1)+r}return e}function i(e,t){switch(e.readBits(2)){case 0:return e.readBits(4,t);case 1:return e.readBits(8,t);case 2:return e.readBits(12,t);case 3:return e.readBits(32,t)}throw new Error("Invalid var bit")}t.makeUnsigned=a,t.readBitVar=i,t.writeBitVar=function(e,t,r){var a=r?n.logBase2(Math.abs(e))+2:n.logBase2(e)+1;if(r){var i=e<0?1:0;e^=(-i<<a-1)+(i<<a-1)}a>12?(t.writeBits(3,2),t.writeBits(e,32)):a>8?(t.writeBits(2,2),t.writeBits(e,12)):a>4?(t.writeBits(1,2),t.writeBits(e,8)):(t.writeBits(0,2),t.writeBits(e,4))},t.readUBitVar=i,t.readVarInt=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0,n=0;n<35;n+=7){var a=e.readUint8();if(r|=(127&a)<<n,a>>7===0)break}return t?r>>1^-(1&r):r},t.writeVarInt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=a(e,r);do{var n=127&e,i=e>=128?128:0;t.writeUint8(n|i),e>>=7}while(e>0)}},function(e,t,r){"use strict";var n=r(0),a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0});var o=r(14);!function(e){e[e.PRESERVE=0]="PRESERVE",e[e.ENTER=1]="ENTER",e[e.LEAVE=2]="LEAVE",e[e.DELETE=4]="DELETE"}(t.PVS||(t.PVS={}));var s=function(){function e(t,r,n){a(this,e),this.serverClass=t,this.entityIndex=r,this.props=[],this.inPVS=!1,this.pvs=n}return i(e,null,[{key:"getPropByFullName",value:function(e,t){var r,a=n(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.definition.fullName===t)return i}}catch(o){a.e(o)}finally{a.f()}return null}}]),i(e,[{key:"getPropByDefinition",value:function(t){return e.getPropByFullName(this.props,t.fullName)}},{key:"getProperty",value:function(t,r){var n=e.getPropByFullName(this.props,"".concat(t,".").concat(r));if(n)return n;throw new Error("Property not found in entity (".concat(t,".").concat(r,")"))}},{key:"hasProperty",value:function(t,r){return null!==e.getPropByFullName(this.props,"".concat(t,".").concat(r))}},{key:"clone",value:function(){var t,r=new e(this.serverClass,this.entityIndex,this.pvs),a=n(this.props);try{for(a.s();!(t=a.n()).done;){var i=t.value;r.props.push(i.clone())}}catch(o){a.e(o)}finally{a.f()}return this.serialNumber&&(r.serialNumber=this.serialNumber),"undefined"!==typeof this.delay&&(r.delay=this.delay),r.inPVS=this.inPVS,r}},{key:"applyPropUpdate",value:function(e){var t,r=n(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=this.getPropByDefinition(a.definition);i?i.value=a.value:this.props.push(a.clone())}}catch(o){r.e(o)}finally{r.f()}}},{key:"diffFromBaseLine",value:function(t){return this.props.filter((function(r){var n=e.getPropByFullName(t,r.definition.fullName);return!n||!o.SendProp.areEqual(r,n)}))}},{key:"getPropValue",value:function(t){var r=e.getPropByFullName(this.props,t);return r?r.value:null}}]),e}();t.PacketEntity=s},function(e,t,r){"use strict";var n=r(1),a=r(2);Object.defineProperty(t,"__esModule",{value:!0});var i,o,s=function(){function e(t,r,a,i){n(this,e),this.originalBitCount=null,this.type=t,this.name=r,this.flags=a,this.excludeDTName=null,this.lowValue=0,this.highValue=0,this.bitCount=0,this.table=null,this.numElements=0,this.arrayProperty=null,this.ownerTableName=i}return a(e,[{key:"hasFlag",value:function(e){return 0!==(this.flags&e)}},{key:"isExcludeProp",value:function(){return this.hasFlag(o.SPROP_EXCLUDE)}},{key:"inspect",value:function(){var e={ownerTableName:this.ownerTableName,name:this.name,type:i[this.type],flags:this.flags,bitCount:this.bitCount};return this.type===i.DPT_Float&&(e.lowValue=this.lowValue,e.highValue=this.highValue),this.type===i.DPT_DataTable&&this.table&&(e.excludeDTName=this.table.name),e}},{key:"fullName",get:function(){return"".concat(this.ownerTableName,".").concat(this.name)}},{key:"allFlags",get:function(){return e.formatFlags(this.flags)}}],[{key:"formatFlags",value:function(e){var t=[];for(var r in o)if(o.hasOwnProperty(r)){var n=o[r];"number"===typeof n&&e&n&&t.push(r)}return t}}]),e}();t.SendPropDefinition=s,function(e){e[e.DPT_Int=0]="DPT_Int",e[e.DPT_Float=1]="DPT_Float",e[e.DPT_Vector=2]="DPT_Vector",e[e.DPT_VectorXY=3]="DPT_VectorXY",e[e.DPT_String=4]="DPT_String",e[e.DPT_Array=5]="DPT_Array",e[e.DPT_DataTable=6]="DPT_DataTable",e[e.DPT_NUMSendPropTypes=7]="DPT_NUMSendPropTypes"}(i=t.SendPropType||(t.SendPropType={})),function(e){e[e.SPROP_UNSIGNED=1]="SPROP_UNSIGNED",e[e.SPROP_COORD=2]="SPROP_COORD",e[e.SPROP_NOSCALE=4]="SPROP_NOSCALE",e[e.SPROP_ROUNDDOWN=8]="SPROP_ROUNDDOWN",e[e.SPROP_ROUNDUP=16]="SPROP_ROUNDUP",e[e.SPROP_NORMAL=32]="SPROP_NORMAL",e[e.SPROP_EXCLUDE=64]="SPROP_EXCLUDE",e[e.SPROP_XYZE=128]="SPROP_XYZE",e[e.SPROP_INSIDEARRAY=256]="SPROP_INSIDEARRAY",e[e.SPROP_PROXY_ALWAYS_YES=512]="SPROP_PROXY_ALWAYS_YES",e[e.SPROP_CHANGES_OFTEN=1024]="SPROP_CHANGES_OFTEN",e[e.SPROP_IS_A_VECTOR_ELEM=2048]="SPROP_IS_A_VECTOR_ELEM",e[e.SPROP_COLLAPSIBLE=4096]="SPROP_COLLAPSIBLE",e[e.SPROP_COORD_MP=8192]="SPROP_COORD_MP",e[e.SPROP_COORD_MP_LOWPRECISION=16384]="SPROP_COORD_MP_LOWPRECISION",e[e.SPROP_COORD_MP_INTEGRAL=32768]="SPROP_COORD_MP_INTEGRAL",e[e.SPROP_VARINT=32]="SPROP_VARINT"}(o=t.SendPropFlag||(t.SendPropFlag={}))},function(e,t,r){(function(n){var a;!function(i){var o=function(e,t,r){if(!(e instanceof ArrayBuffer||"undefined"!==typeof n&&e instanceof n))throw new Error("Must specify a valid ArrayBuffer or Buffer.");t=t||0,r=r||e.byteLength||e.length,this._view=new Uint8Array(e.buffer||e,t,r),this.bigEndian=!1};o._scratch=new DataView(new ArrayBuffer(8)),Object.defineProperty(o.prototype,"buffer",{get:function(){return"undefined"!==typeof n?n.from(this._view.buffer):this._view.buffer},enumerable:!0,configurable:!1}),Object.defineProperty(o.prototype,"byteLength",{get:function(){return this._view.length},enumerable:!0,configurable:!1}),o.prototype._setBit=function(e,t){t?this._view[e>>3]|=1<<(7&e):this._view[e>>3]&=~(1<<(7&e))},o.prototype.getBits=function(e,t,r){var n=8*this._view.length-e;if(t>n)throw new Error("Cannot get "+t+" bit(s) from offset "+e+", "+n+" available");for(var a=0,i=0;i<t;){var o=t-i,s=7&e,u=this._view[e>>3],c=Math.min(o,8-s);this.bigEndian?(a<<=c,a|=u>>8-c-s&~(255<<c)):a|=(u>>s&~(255<<c))<<i,e+=c,i+=c}return r?(32!==t&&a&1<<t-1&&(a|=-1^(1<<t)-1),a):a>>>0},o.prototype.setBits=function(e,t,r){var n=8*this._view.length-e;if(r>n)throw new Error("Cannot set "+r+" bit(s) from offset "+e+", "+n+" available");for(var a=0;a<r;){var i,o,s,u=r-a,c=7&e,l=e>>3,f=Math.min(u,8-c);if(this.bigEndian){o=t>>r-a-f&(i=~(-1<<f));var d=8-c-f;s=~(i<<d),this._view[l]=this._view[l]&s|o<<d}else o=t&(i=~(255<<f)),t>>=f,s=~(i<<c),this._view[l]=this._view[l]&s|o<<c;e+=f,a+=f}},o.prototype.getBoolean=function(e){return 0!==this.getBits(e,1,!1)},o.prototype.getInt8=function(e){return this.getBits(e,8,!0)},o.prototype.getUint8=function(e){return this.getBits(e,8,!1)},o.prototype.getInt16=function(e){return this.getBits(e,16,!0)},o.prototype.getUint16=function(e){return this.getBits(e,16,!1)},o.prototype.getInt32=function(e){return this.getBits(e,32,!0)},o.prototype.getUint32=function(e){return this.getBits(e,32,!1)},o.prototype.getFloat32=function(e){return o._scratch.setUint32(0,this.getUint32(e)),o._scratch.getFloat32(0)},o.prototype.getFloat64=function(e){return o._scratch.setUint32(0,this.getUint32(e)),o._scratch.setUint32(4,this.getUint32(e+32)),o._scratch.getFloat64(0)},o.prototype.setBoolean=function(e,t){this.setBits(e,t?1:0,1)},o.prototype.setInt8=o.prototype.setUint8=function(e,t){this.setBits(e,t,8)},o.prototype.setInt16=o.prototype.setUint16=function(e,t){this.setBits(e,t,16)},o.prototype.setInt32=o.prototype.setUint32=function(e,t){this.setBits(e,t,32)},o.prototype.setFloat32=function(e,t){o._scratch.setFloat32(0,t),this.setBits(e,o._scratch.getUint32(0),32)},o.prototype.setFloat64=function(e,t){o._scratch.setFloat64(0,t),this.setBits(e,o._scratch.getUint32(0),32),this.setBits(e+32,o._scratch.getUint32(4),32)},o.prototype.getArrayBuffer=function(e,t){for(var r=new Uint8Array(t),n=0;n<t;n++)r[n]=this.getUint8(e+8*n);return r};var s=function(e,t){return function(){if(this._index+t>this._length)throw new Error("Trying to read past the end of the stream");var r=this._view[e](this._index);return this._index+=t,r}},u=function(e,t){return function(r){this._view[e](this._index,r),this._index+=t}};function c(e,t,r){if(0===t)return"";var n=0,a=[],i=!0,o=!!t;for(t||(t=Math.floor((e._length-e._index)/8));n<t;){var s=e.readUint8();if(0===s&&(i=!1,!o))break;i&&a.push(s),n++}var u=String.fromCharCode.apply(null,a);if(!r)return u;try{return decodeURIComponent(escape(u))}catch(c){return u}}var l=function(e,t,r){var a=e instanceof ArrayBuffer||"undefined"!==typeof n&&e instanceof n;if(!(e instanceof o)&&!a)throw new Error("Must specify a valid BitView, ArrayBuffer or Buffer");this._view=a?new o(e,t,r):e,this._index=0,this._startIndex=0,this._length=8*this._view.byteLength};Object.defineProperty(l.prototype,"index",{get:function(){return this._index-this._startIndex},set:function(e){this._index=e+this._startIndex},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"length",{get:function(){return this._length-this._startIndex},set:function(e){this._length=e+this._startIndex},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"bitsLeft",{get:function(){return this._length-this._index},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"byteIndex",{get:function(){return Math.ceil(this._index/8)},set:function(e){this._index=8*e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"buffer",{get:function(){return this._view.buffer},enumerable:!0,configurable:!1}),Object.defineProperty(l.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!1}),Object.defineProperty(l.prototype,"bigEndian",{get:function(){return this._view.bigEndian},set:function(e){this._view.bigEndian=e},enumerable:!0,configurable:!1}),l.prototype.readBits=function(e,t){var r=this._view.getBits(this._index,e,t);return this._index+=e,r},l.prototype.writeBits=function(e,t){this._view.setBits(this._index,e,t),this._index+=t},l.prototype.readBoolean=s("getBoolean",1),l.prototype.readInt8=s("getInt8",8),l.prototype.readUint8=s("getUint8",8),l.prototype.readInt16=s("getInt16",16),l.prototype.readUint16=s("getUint16",16),l.prototype.readInt32=s("getInt32",32),l.prototype.readUint32=s("getUint32",32),l.prototype.readFloat32=s("getFloat32",32),l.prototype.readFloat64=s("getFloat64",64),l.prototype.writeBoolean=u("setBoolean",1),l.prototype.writeInt8=u("setInt8",8),l.prototype.writeUint8=u("setUint8",8),l.prototype.writeInt16=u("setInt16",16),l.prototype.writeUint16=u("setUint16",16),l.prototype.writeInt32=u("setInt32",32),l.prototype.writeUint32=u("setUint32",32),l.prototype.writeFloat32=u("setFloat32",32),l.prototype.writeFloat64=u("setFloat64",64),l.prototype.readASCIIString=function(e){return function(e,t){return c(e,t,!1)}(this,e)},l.prototype.readUTF8String=function(e){return function(e,t){return c(e,t,!0)}(this,e)},l.prototype.writeASCIIString=function(e,t){!function(e,t,r){for(var n=r||t.length+1,a=0;a<n;a++)e.writeUint8(a<t.length?t.charCodeAt(a):0)}(this,e,t)},l.prototype.writeUTF8String=function(e,t){!function(e,t,r){for(var n=function(e){var t,r,n=[];for(t=0;t<e.length;t++)(r=e.charCodeAt(t))<=127?n.push(r):r<=2047?(n.push(r>>6|192),n.push(63&r|128)):r<=65535?(n.push(r>>12|224),n.push(r>>6&63|128),n.push(63&r|128)):(n.push(r>>18|240),n.push(r>>12&63|128),n.push(r>>6&63|128),n.push(63&r|128));return n}(t),a=r||n.length+1,i=0;i<a;i++)e.writeUint8(i<n.length?n[i]:0)}(this,e,t)},l.prototype.readBitStream=function(e){var t=new l(this._view);return t._startIndex=this._index,t._index=this._index,t.length=e,this._index+=e,t},l.prototype.writeBitStream=function(e,t){var r;for(t||(t=e.bitsLeft);t>0;)r=Math.min(t,32),this.writeBits(e.readBits(r),r),t-=r},l.prototype.readArrayBuffer=function(e){var t=this._view.getArrayBuffer(this._index,e);return this._index+=8*e,t},l.prototype.writeArrayBuffer=function(e,t){this.writeBitStream(new l(e),8*t)},void 0===(a=function(){return{BitView:o,BitStream:l}}.call(t,r,t,e))||(e.exports=a)}()}).call(this,r(20).Buffer)},function(e,t,r){var n=r(39);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){var n=r(12),a=r(40),i=r(41);e.exports=function(e){return function(){var t,r=n(e);if(a()){var o=n(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return i(this,t)}}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t,r){var n=r(45),a=r(46),i=r(22),o=r(47);e.exports=function(e,t){return n(e)||a(e,t)||i(e,t)||o()}},function(e,t,r){"use strict";var n=r(1),a=r(2);Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),o=function(){function e(t){n(this,e),this.definition=t,this.value=null}return a(e,null,[{key:"areEqual",value:function(t,r){return t.definition.fullName===r.definition.fullName&&e.valuesAreEqual(t.value,r.value)}},{key:"valuesAreEqual",value:function(t,r){if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!e.valuesAreEqual(t[n],r[n]))return!1;return!0}return t instanceof i.Vector&&r instanceof i.Vector?i.Vector.areEqual(t,r):t===r}}]),a(e,[{key:"clone",value:function(){var t=new e(this.definition);return t.value=this.value,t}}]),e}();t.SendProp=o},function(e,t,r){"use strict";var n=r(1),a=r(2);Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(4);!function(e){e[e.ALIVE=0]="ALIVE",e[e.DYING=1]="DYING",e[e.DEATH=2]="DEATH",e[e.RESPAWNABLE=3]="RESPAWNABLE"}(i=t.LifeState||(t.LifeState={}));var s=function(){function e(t,r){n(this,e),this.position=new o.Vector(0,0,0),this.viewAngles=new o.Vector(0,0,0),this.health=0,this.maxHealth=0,this.classId=0,this.team=0,this.viewAngle=0,this.weaponIds=[],this.ammo=[],this.lifeState=i.DEATH,this.activeWeapon=0,this.match=t,this.user=r}return a(e,[{key:"weapons",get:function(){var e=this;return this.weaponIds.map((function(t){return e.match.outerMap.get(t)})).filter((function(e){return e>0})).map((function(t){return e.match.weaponMap.get(t)}))}}]),e}();t.Player=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.file=2]="file",e[e.netTick=3]="netTick",e[e.stringCmd=4]="stringCmd",e[e.setConVar=5]="setConVar",e[e.sigOnState=6]="sigOnState",e[e.print=7]="print",e[e.serverInfo=8]="serverInfo",e[e.classInfo=10]="classInfo",e[e.setPause=11]="setPause",e[e.createStringTable=12]="createStringTable",e[e.updateStringTable=13]="updateStringTable",e[e.voiceInit=14]="voiceInit",e[e.voiceData=15]="voiceData",e[e.parseSounds=17]="parseSounds",e[e.setView=18]="setView",e[e.fixAngle=19]="fixAngle",e[e.bspDecal=21]="bspDecal",e[e.userMessage=23]="userMessage",e[e.entityMessage=24]="entityMessage",e[e.gameEvent=25]="gameEvent",e[e.packetEntities=26]="packetEntities",e[e.tempEntities=27]="tempEntities",e[e.preFetch=28]="preFetch",e[e.menu=29]="menu",e[e.gameEventList=30]="gameEventList",e[e.getCvarValue=31]="getCvarValue",e[e.cmdKeyValues=32]="cmdKeyValues"}(t.PacketTypeId||(t.PacketTypeId={}))},function(e,t,r){"use strict";var n=r(0),a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0});var o=r(53),s=r(24),u=r(54),c=r(3),l=function(){function e(){a(this,e),this.version=0,this.staticBaseLines=new Map,this.staticBaselineCache=new Map,this.eventDefinitions=new Map,this.eventDefinitionTypes=new Map,this.entityClasses=new Map,this.sendTables=new Map,this.stringTables=[],this.serverClasses=[],this.instanceBaselines=[new Map,new Map],this.skippedPackets=[],this.userInfo=new Map,this.tick=0}return i(e,[{key:"handlePacket",value:function(e){switch(e.packetType){case"netTick":this.tick=e.tick;break;case"serverInfo":this.version=e.version,this.game=e.game;break;case"stringTable":u.handleStringTables(e,this);break;case"createStringTable":u.handleStringTable(e,this);break;case"updateStringTable":u.handleStringTableUpdate(e,this);break;case"gameEventList":o.handleGameEventList(e,this);break;case"packetEntities":s.handlePacketEntitiesForState(e,this)}}},{key:"handleMessage",value:function(e){switch(e.type){case c.MessageType.DataTables:this.handleDataTableMessage(e);break;case c.MessageType.StringTables:this.handleStringTableMessage(e)}}},{key:"getStringTable",value:function(e){var t=this.stringTables.find((function(t){return t.name===e}));return t||null}},{key:"getUserEntityInfo",value:function(e){var t=this.userInfo.get(JSON.parse(JSON.stringify(e)));return t||{name:"",userId:e,steamId:"",entityId:0}}},{key:"handleDataTableMessage",value:function(e){var t,r=n(e.tables);try{for(r.s();!(t=r.n()).done;){var a=t.value;this.sendTables.set(a.name,a)}}catch(i){r.e(i)}finally{r.f()}this.serverClasses=e.serverClasses}},{key:"handleStringTableMessage",value:function(e){var t,r=n(e.tables);try{for(r.s();!(t=r.n()).done;){var a=t.value;u.handleTable(a,this)}}catch(i){r.e(i)}finally{r.f()}}}]),e}();t.ParserState=l,t.getClassBits=function(e){return Math.ceil(Math.log(e.serverClasses.length)*Math.LOG2E)},t.getSendTable=function(e,t){var r=e.sendTables.get(t);if(!r)throw new Error("Unknown sendTable ".concat(t));return r},t.createParserState=function(){return new l}},function(e,t,r){"use strict";var n=r(1),a=r(2);Object.defineProperty(t,"__esModule",{value:!0});var i=r(8),o=r(4),s=r(5),u=r(6);t.bitNormalFactor=1/2047;var c=function(){function e(){n(this,e)}return a(e,null,[{key:"decode",value:function(t,r){switch(t.type){case i.SendPropType.DPT_Int:return e.readInt(t,r);case i.SendPropType.DPT_Vector:return e.readVector(t,r);case i.SendPropType.DPT_VectorXY:return e.readVectorXY(t,r);case i.SendPropType.DPT_Float:return e.readFloat(t,r);case i.SendPropType.DPT_String:return e.readString(r);case i.SendPropType.DPT_Array:return e.readArray(t,r)}throw new Error("Unknown property type ".concat(t.type))}},{key:"readInt",value:function(e,t){return e.hasFlag(i.SendPropFlag.SPROP_VARINT)?u.readVarInt(t,!e.hasFlag(i.SendPropFlag.SPROP_UNSIGNED)):t.readBits(e.bitCount,!e.hasFlag(i.SendPropFlag.SPROP_UNSIGNED))}},{key:"readArray",value:function(t,r){var n=s.logBase2(t.numElements)+1,a=r.readBits(n),i=[];if(!t.arrayProperty)throw new Error("Array of undefined type");for(var o=0;o<a;o++){var u=e.decode(t.arrayProperty,r);if(u instanceof Array)throw new Error("Nested arrays not supported");i.push(u)}return i}},{key:"readString",value:function(e){var t=e.readBits(9);return e.readASCIIString(t)}},{key:"readVector",value:function(t,r){var n=e.readFloat(t,r),a=e.readFloat(t,r),i=e.readFloat(t,r);return new o.Vector(n,a,i)}},{key:"readVectorXY",value:function(t,r){var n=e.readFloat(t,r),a=e.readFloat(t,r);return new o.Vector(n,a,0)}},{key:"readFloat",value:function(t,r){if(t.hasFlag(i.SendPropFlag.SPROP_COORD))return e.readBitCoord(r);if(t.hasFlag(i.SendPropFlag.SPROP_COORD_MP))return e.readBitCoordMP(r,!1,!1);if(t.hasFlag(i.SendPropFlag.SPROP_COORD_MP_LOWPRECISION))return e.readBitCoordMP(r,!1,!0);if(t.hasFlag(i.SendPropFlag.SPROP_COORD_MP_INTEGRAL))return e.readBitCoordMP(r,!0,!1);if(t.hasFlag(i.SendPropFlag.SPROP_NOSCALE))return r.readFloat32();if(t.hasFlag(i.SendPropFlag.SPROP_NORMAL))return e.readBitNormal(r);var n=r.readBits(t.bitCount)/((1<<t.bitCount)-1);return t.lowValue+(t.highValue-t.lowValue)*n}},{key:"readBitNormal",value:function(e){var r=e.readBoolean(),n=e.readBits(11)*t.bitNormalFactor;return r?-n:n}},{key:"readBitCoord",value:function(e){var t=e.readBoolean(),r=e.readBoolean();if(t||r){var n=e.readBoolean(),a=(t?e.readBits(14)+1:0)+(r?e.readBits(5):0)*(1/32);return n?-a:a}return 0}},{key:"readBitCoordMP",value:function(e,t,r){var n=0,a=!1,i=e.readBoolean(),o=e.readBoolean();if(t){if(o)if(a=e.readBoolean(),i)n=e.readBits(11)+1;else if((n=e.readBits(14)+1)<2048)throw new Error("Something's fishy...")}else a=e.readBoolean(),o&&(n=i?e.readBits(11)+1:e.readBits(14)+1),n+=e.readBits(r?3:5)*(1/(1<<(r?3:5)));return a&&(n=-n),n}}]),e}();t.SendPropParser=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectileServerClassMap={CTFProjectile_Rocket:1,CTFGrenadePipebombProjectile:2,CTFProjectile_HealingBolt:4},t.ProjectileTypeMap={1:"rocket",2:"pipebomb",3:"stickybomb",4:"healingBolt"}},function(e,t,r){"use strict";(function(e){var n=r(33),a=r(34),i=r(35);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,r,n):"string"===typeof t?function(e,t,r){"string"===typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),a=(e=s(e,n)).write(t,r);a!==n&&(e=e.slice(0,a));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|h(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(n=t.length)!==n?s(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|h(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(n)return V(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,a){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,a);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,a){var i,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var l=-1;for(i=r;i<s;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*o}else-1!==l&&(i-=i-l),l=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){for(var f=!0,d=0;d<u;d++)if(c(e,i+d)!==c(t,d)){f=!1;break}if(f)return i}return-1}function m(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function T(e,t,r,n){return H(V(t,e.length-r),e,r,n)}function w(e,t,r,n){return H(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return w(e,t,r,n)}function E(e,t,r,n){return H(j(t),e,r,n)}function P(e,t,r,n){return H(function(e,t){for(var r,n,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,a=r%256,i.push(a),i.push(n);return i}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i,o,s,u,c=e[a],l=null,f=c>239?4:c>223?3:c>191?2:1;if(a+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(i=e[a+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=e[a+1],o=e[a+2],128===(192&i)&&128===(192&o)&&(u=(15&c)<<12|(63&i)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],128===(192&i)&&128===(192&o)&&128===(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),a+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"===typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var o=e[r];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,a),a+=o.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):y.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,a){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(i,o),c=this.slice(n,a),l=e.slice(t,r),f=0;f<s;++f)if(c[f]!==l[f]){i=c[f],o=l[f];break}return i<o?-1:o<i?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return m(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return b(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function x(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;++i)a+=L(e[i]);return a}function B(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function D(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,a,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function k(e,t,r,n){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-r,2);a<i;++a)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function A(e,t,r,n){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-r,4);a<i;++a)e[r+a]=t>>>8*(n?a:3-a)&255}function N(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,i){return i||N(e,0,r,4),a.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,i){return i||N(e,0,r,8),a.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var a=t-e;r=new u(a,void 0);for(var i=0;i<a;++i)r[i]=this[i+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},u.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),a.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),a.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),a.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),a.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):A(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):A(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a,i=n-r;if(this===e&&r<t&&t<n)for(a=i-1;a>=0;--a)e[a+t]=this[a+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=u.isBuffer(e)?e:V(new u(e,n).toString()),s=o.length;for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var r;t=t||1/0;for(var n=e.length,a=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function j(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(R,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function H(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}}).call(this,r(32))},function(e,t,r){e.exports=r(37)},function(e,t,r){var n=r(38);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t,r){"use strict";var n=r(13),a=r(0),i=r(1),o=r(2);Object.defineProperty(t,"__esModule",{value:!0});var s=r(48),u=r(24),c=r(52),l=function(){function e(t){i(this,e),this.tick=0,this.chat=[],this.users=new Map,this.deaths=[],this.rounds=[],this.startTick=0,this.intervalPerTick=0,this.world={boundaryMin:{x:0,y:0,z:0},boundaryMax:{x:0,y:0,z:0}},this.playerEntityMap=new Map,this.weaponMap=new Map,this.outerMap=new Map,this.teams=new Map,this.teamEntityMap=new Map,this.projectileEntityMap=new Map,this.buildings=new Map,this.playerResources=[],this.parserState=t}return o(e,[{key:"getState",value:function(){var e,t={},r=a(this.parserState.userInfo.values());try{for(r.s();!(e=r.n()).done;){var i=e.value;this.getUserInfo(i.userId)}}catch(f){r.e(f)}finally{r.f()}var o,s=a(this.users.entries());try{for(s.s();!(o=s.n()).done;){var u=n(o.value,2),c=u[0],l=u[1];t[c]={classes:l.classes,name:l.name,steamId:l.steamId,userId:l.userId},l.team&&(t[c].team=l.team)}}catch(f){s.e(f)}finally{s.f()}return{chat:this.chat,users:t,deaths:this.deaths,rounds:this.rounds,startTick:this.startTick,intervalPerTick:this.intervalPerTick}}},{key:"handlePacket",value:function(e,t){switch(e.packetType){case"packetEntities":u.handlePacketEntities(e,this,t);break;case"netTick":0===this.startTick&&(this.startTick=e.tick),this.tick=e.tick;break;case"serverInfo":this.intervalPerTick=e.intervalPerTick;break;case"userMessage":switch(e.userMessageType){case"sayText2":c.handleSayText2(e,this)}break;case"gameEvent":s.handleGameEvent(e,this)}}},{key:"getUserInfo",value:function(e){for(;e>256;)e-=256;var t=this.users.get(e);if(t&&t.userId!==e)throw new Error("Invalid user info id");if(!t){var r=this.parserState.getUserEntityInfo(e),n=Object.assign({classes:{},team:""},r);return this.users.set(e,n),n}if(!t.steamId){var a=this.parserState.getUserEntityInfo(e);a.steamId&&(t.steamId=a.steamId,t.entityId=a.entityId,t.name=a.name)}return t}},{key:"getUserInfoForEntity",value:function(e){var t,r=a(this.parserState.userInfo.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n&&n.entityId===e.entityIndex)return this.getUserInfo(n.userId)}}catch(i){r.e(i)}finally{r.f()}return null}},{key:"getPlayerByUserId",value:function(e){var t=this.getUserInfo(e);return this.playerEntityMap.get(t.entityId)||null}}]),e}();t.Match=l},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),i=r(49),o=r(50),s=r(51);function u(e,t){e.pvs===a.PVS.DELETE&&t.entityClasses.delete(e.entityIndex),t.entityClasses.set(e.entityIndex,e.serverClass)}t.handlePacketEntities=function(e,t,r){var a,u=n(e.entities);try{for(u.s();!(a=u.n()).done;){var c=a.value;switch(i.handleBaseEntity(c,t,r),t.parserState.game){case"tf":s.handleTFEntity(c,t,r);break;case"hl2mp":o.handleHL2DMEntity(c,t,r)}}}catch(l){u.e(l)}finally{u.f()}},t.handlePacketEntitiesForState=function(e,t){var r,a=n(e.removedEntities);try{for(a.s();!(r=a.n()).done;){var i=r.value;t.entityClasses.delete(i)}}catch(c){a.e(c)}finally{a.f()}var o,s=n(e.entities);try{for(s.s();!(o=s.n()).done;){u(o.value,t)}}catch(c){s.e(c)}finally{s.f()}}},function(e,t,r){"use strict";var n=r(21),a=r(0),i=r(1),o=r(2);Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),u=r(16),c=r(17),l=r(55),f=r(56),d=r(59),h=r(62),p=r(87),y=r(88),v=r(89),g=r(90);t.messageHandlers=new Map([[s.MessageType.Sigon,h.PacketMessageHandler],[s.MessageType.Packet,h.PacketMessageHandler],[s.MessageType.ConsoleCmd,f.ConsoleCmdHandler],[s.MessageType.UserCmd,g.UserCmdHandler],[s.MessageType.DataTables,d.DataTableHandler],[s.MessageType.StringTables,y.StringTableHandler],[s.MessageType.SyncTick,v.SyncTickHandler],[s.MessageType.Stop,p.StopHandler]]);var _=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];i(this,e),this.header=null,this.lastMessage=-1,this.stream=t,this.parserState=new c.ParserState,"hl2mp"===this.getHeader().game?this.parserState.skippedPackets=[u.PacketTypeId.tempEntities]:this.parserState.skippedPackets=r}return o(e,[{key:"getHeader",value:function(){return this.header||(this.header=l.parseHeader(this.stream)),this.header}},{key:"getPackets",value:n.mark((function e(){var t,r,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getHeader(),t=a(this.iterateMessages()),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=9;break}return i=r.value,e.delegateYield(this.handleMessage(i),"t0",7);case 7:e.next=4;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),t.e(e.t1);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[2,11,14,17]])}))},{key:"getMessages",value:n.mark((function e(){var t,r,i,o,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getHeader(),t=a(this.iterateMessages()),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=12;break}i=r.value,o=a(this.handleMessage(i));try{for(o.s();!(s=o.n()).done;)s.value}catch(n){o.e(n)}finally{o.f()}return e.next=10,i;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))},{key:"iterateMessages",value:n.mark((function e(){var t;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.readMessage(this.stream,this.parserState),e.next=4,t;case 4:if(t.type!==s.MessageType.Stop){e.next=6;break}return e.abrupt("return");case 6:e.next=0;break;case 8:case"end":return e.stop()}}),e,this)}))},{key:"handleMessage",value:n.mark((function e(t){var r,i,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.parserState.handleMessage(t),t.type!==s.MessageType.Packet){e.next=20;break}r=a(t.packets),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=12;break}return o=i.value,this.parserState.handlePacket(o),e.next=10,o;case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[3,14,17,20]])}))},{key:"readMessage",value:function(e,r){if(e.bitsLeft<8)throw new Error("Stream ended without stop packet");var n=e.readUint8();if(0===n)return{type:s.MessageType.Stop,rawData:e.readBitStream(0)};var a=t.messageHandlers.get(n);if(!a)throw new Error("No handler for message of type ".concat(s.MessageType[n],"(").concat(n,"),\n\t\t\tlast message: ").concat(s.MessageType[this.lastMessage],"(").concat(this.lastMessage,")"));return this.lastMessage=n,a.parseMessage(this.stream,r)}}]),e}();t.Parser=_},function(e,t,r){"use strict";var n=r(0),a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),s=r(4),u=r(5),c=r(6),l=r(18),f=function(){function e(){a(this,e)}return i(e,null,[{key:"encode",value:function(t,r,n){switch(r.type){case o.SendPropType.DPT_Int:if("number"!==typeof t)throw new Error("Invalid value for DPT_Int ".concat(JSON.stringify(t)));return e.writeInt(t,r,n);case o.SendPropType.DPT_Vector:if(!(t instanceof s.Vector))throw new Error("Invalid value for DPT_Vector ".concat(JSON.stringify(t)));return e.writeVector(t,r,n);case o.SendPropType.DPT_VectorXY:if(!(t instanceof s.Vector))throw new Error("Invalid value for DPT_VectorXY ".concat(JSON.stringify(t)));return e.writeVectorXY(t,r,n);case o.SendPropType.DPT_Float:if("number"!==typeof t)throw new Error("Invalid value for DPT_Float ".concat(JSON.stringify(t)));return e.writeFloat(t,r,n);case o.SendPropType.DPT_String:if("string"!==typeof t)throw new Error("Invalid value for DPT_String ".concat(JSON.stringify(t)));return e.writeString(t,n);case o.SendPropType.DPT_Array:if(!Array.isArray(t))throw new Error("Invalid value for DPT_Array ".concat(JSON.stringify(t)));return e.writeArray(t,r,n)}throw new Error("Unknown property type")}},{key:"writeInt",value:function(e,t,r){return t.hasFlag(o.SendPropFlag.SPROP_VARINT)?c.writeVarInt(e,r,!t.hasFlag(o.SendPropFlag.SPROP_UNSIGNED)):t.hasFlag(o.SendPropFlag.SPROP_UNSIGNED)?r.writeBits(e,t.bitCount):r.writeBits(c.makeUnsigned(e),t.bitCount)}},{key:"writeArray",value:function(t,r,a){var i=u.logBase2(r.numElements)+1;if(a.writeBits(t.length,i),!r.arrayProperty)throw new Error("Array of undefined type");var o,s=n(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;e.encode(c,r.arrayProperty,a)}}catch(l){s.e(l)}finally{s.f()}}},{key:"writeString",value:function(e,t){t.writeBits(e.length,9),e&&t.writeASCIIString(e,e.length)}},{key:"writeVector",value:function(t,r,n){e.writeFloat(t.x,r,n),e.writeFloat(t.y,r,n),e.writeFloat(t.z,r,n)}},{key:"writeVectorXY",value:function(t,r,n){e.writeFloat(t.x,r,n),e.writeFloat(t.y,r,n)}},{key:"writeFloat",value:function(t,r,n){if(r.hasFlag(o.SendPropFlag.SPROP_COORD))return e.writeBitCoord(t,n);if(r.hasFlag(o.SendPropFlag.SPROP_COORD_MP))return e.writeBitCoordMP(t,n,!1,!1);if(r.hasFlag(o.SendPropFlag.SPROP_COORD_MP_LOWPRECISION))return e.writeBitCoordMP(t,n,!1,!0);if(r.hasFlag(o.SendPropFlag.SPROP_COORD_MP_INTEGRAL))return e.writeBitCoordMP(t,n,!0,!1);if(r.hasFlag(o.SendPropFlag.SPROP_NOSCALE))return n.writeFloat32(t);if(r.hasFlag(o.SendPropFlag.SPROP_NORMAL))return e.writeBitNormal(t,n);var a=(t-r.lowValue)/(r.highValue-r.lowValue),i=Math.round(a*((1<<r.bitCount)-1));n.writeBits(i,r.bitCount)}},{key:"writeBitNormal",value:function(e,t){t.writeBoolean(e<0);var r=Math.abs(e)%1,n=Math.round(r/l.bitNormalFactor);t.writeBits(n,11)}},{key:"writeBitCoord",value:function(e,t){var r=Math.abs(e),n=Math.floor(r),a=r%1;t.writeBoolean(0!==n),t.writeBoolean(0!==a),(n||a)&&(t.writeBoolean(e<0),n&&t.writeBits(n-1,14),a&&t.writeBits(32*a,5))}},{key:"writeBitCoordMP",value:function(e,t,r,n){var a=Math.abs(e),i=Math.floor(a),o=a%1,s=i<Math.pow(2,11);if(t.writeBoolean(s),t.writeBoolean(i>0),r)i&&(t.writeBoolean(e<0),s?t.writeBits(i-1,11):t.writeBits(i-1,14));else{t.writeBoolean(e<0),i&&(s?t.writeBits(i-1,11):t.writeBits(i-1,14));var u=Math.round(o/(1/(1<<(n?3:5))));t.writeBits(u,n?3:5)}}}]),e}();t.SendPropEncoder=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5);function a(e,t){for(var r=-1,n=0,a=0;a<e.length;a++){var o=i(e[a].text,t);o>=3&&o>n&&(n=o,r=a)}return{index:r,count:n}}t.parseStringTableEntries=function(e,t,r){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=n.logBase2(t.maxEntries),o=[],s=-1,u=[],c=0;c<r;c++){var l=e.readBoolean()?s+1:e.readBits(i);if(s=l,l<0||l>t.maxEntries)throw new Error("Invalid string index for string table");var f=void 0;if(e.readBoolean()){var d=e.readBoolean();if(d){var h=e.readBits(5),p=e.readBits(5),y=e.readASCIIString();f=u[h].text?u[h].text.substr(0,p)+y:y}else f=e.readASCIIString()}var v=void 0;if(e.readBoolean())if(t.fixedUserDataSize&&t.fixedUserDataSizeBits)v=e.readBitStream(t.fixedUserDataSizeBits);else{var g=e.readBits(14);v=e.readBitStream(8*g)}if(a[l]){var _=Object.assign({},a[l]);v&&(_.extraData=v),"undefined"!==typeof f&&(_.text=f),o[l]=_,u.push(_)}else o[l]={text:f,extraData:v},u.push(o[l]);u.length>32&&u.shift()}return o},t.guessStringTableEntryLength=function(e,t){var r=Math.ceil(n.logBase2(e.maxEntries)/8);return t.reduce((function(e,t){return e+r+1+1+1+(t.text?t.text.length+1:1)+(t.extraData?Math.ceil(t.extraData.length/8):0)}),1)},t.encodeStringTableEntries=function(e,t,r){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=n.logBase2(t.maxEntries),s=-1,u=[],c=0;c<r.length;c++)if(r[c]){var l=r[c];if(c!==s+1?(e.writeBoolean(!1),e.writeBits(c,o)):e.writeBoolean(!0),s=c,"undefined"===typeof l.text||i[c]&&l.text===i[c].text)e.writeBoolean(!1);else{e.writeBoolean(!0);var f=a(u,l.text),d=f.index,h=f.count;-1!==d?(e.writeBoolean(!0),e.writeBits(d,5),e.writeBits(h,5),e.writeASCIIString(l.text.substr(h))):(e.writeBoolean(!1),e.writeASCIIString(l.text))}if(l.extraData){if(e.writeBoolean(!0),l.extraData.index=0,t.fixedUserDataSize&&t.fixedUserDataSizeBits)e.writeBitStream(l.extraData,t.fixedUserDataSizeBits);else{var p=Math.ceil(l.extraData.length/8);e.writeBits(p,14),e.writeBitStream(l.extraData,8*p)}l.extraData.index=0}else e.writeBoolean(!1);u.push(l),u.length>32&&u.shift()}};function i(e,t){for(var r=Math.min(e.length,t.length,32),n=0;n<r;n++)if(e[n]!==t[n])return n;return Math.min(r,31)}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),i=r(6),o=r(26),s=r(18);function u(e,t){return t+i.readBitVar(e)+1}t.getEntityUpdate=function(e,t){for(var r=-1,n=e.flattenedProps,i=new Map,o=-1;t.readBoolean();){if(o=r,(r=u(t,r))>=4096||r>n.length)throw new Error("prop index out of bounds while applying update for ".concat(e.name,"\n\t\t\tgot ").concat(r," property only has ").concat(n.length," properties (lastProp: ").concat(o,")"));var c=n[r],l=new a.SendProp(c);l.value=s.SendPropParser.decode(c,t),i.set(c.fullName,l)}return Array.from(i.values())},t.encodeEntityUpdate=function(e,t,r){var a=t.flattenedProps;e.sort((function(e,t){return a.findIndex((function(t){return t.fullName===e.definition.fullName}))-a.findIndex((function(e){return e.fullName===t.definition.fullName}))}));var s,u=-1,c=n(e);try{var l=function(){var e=s.value;r.writeBoolean(!0);var n=a.findIndex((function(t){return t.fullName===e.definition.fullName}));if(-1===n)throw new Error("Unknown definition for property ".concat(e.definition.fullName," in ").concat(t.name));if(n<u)throw new Error("Property index not incremental while encoding "+"".concat(e.definition.fullName," after ").concat(a[u].fullName," ")+"in ".concat(t.name," (current: ").concat(n,", last: ").concat(u,")"));!function(e,t,r){var n=e-r-1;i.writeBitVar(n,t)}(n,r,u),u=n,null!==e.value&&o.SendPropEncoder.encode(e.value,e.definition,r)};for(c.s();!(s=c.n()).done;)l()}catch(f){c.e(f)}finally{c.f()}r.writeBoolean(!1)}},function(e,t,r){"use strict";var n=r(0);function a(e,t,r){if("b"===t[0])return e.readBoolean();if("s"===t[0]){if(1===t.length)return e.readUTF8String();var n=parseInt(t.substr(1),10);return e.readASCIIString(n)}if("f32"===t)return e.readFloat32();if("u"===t[0]){var a=parseInt(t.substr(1),10);return e.readBits(a)}if("$"===t[0]&&"*8"===t.substr(t.length-2)){var i=t.substr(1,t.length-3);return e.readBitStream(8*r[i])}if("$"===t[0]){var o=t.substr(1);return e.readBitStream(r[o])}return e.readBits(parseInt(t,10),!0)}function i(e,t,r,n){if("b"===t[0])return e.writeBoolean(n);if("s"===t[0]){if(1===t.length)return e.writeUTF8String(n);var a=parseInt(t.substr(1),10);return e.writeUTF8String(n,a)}if("f32"===t)return e.writeFloat32(n);if("u"===t[0]){var i=parseInt(t.substr(1),10);return e.writeBits(n,i)}if("$"===t[0]&&"*8"===t.substr(t.length-2)){var o=t.substr(1,t.length-3);return e.writeBitStream(n,8*r[o])}if("$"===t[0]){var s=t.substr(1);return e.writeBitStream(n,r[s])}return e.writeBits(n,parseInt(t,10))}Object.defineProperty(t,"__esModule",{value:!0}),t.make=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"packetType",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=t.split("}"),u=s.map((function(e){return e.split("{")})).filter((function(e){return e[0]})),c=function(i){var s=Object.assign({},o);s[r]=e;try{var c,l=n(u);try{for(l.s();!(c=l.n()).done;){var f=c.value,d=a(i,f[1],s);"_"!==f[0]&&(s[f[0]]=d)}}catch(h){l.e(h)}finally{l.f()}}catch(p){throw new Error("Failed reading pattern "+t+". "+p)}return s},l=function(e,t){var r,a=n(u);try{for(a.s();!(r=a.n()).done;){var o=r.value;i(t,o[1],e,e[o[0]])}}catch(s){a.e(s)}finally{a.f()}};return{parser:c,encoder:l,name:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31);t.Demo=n.Demo;var a=r(25);t.Parser=a.Parser;var i=r(23);t.Match=i.Match;var o=r(15);t.Player=o.Player;var s=r(91);t.PlayerCondition=s.PlayerCondition;var u=r(7);t.PacketEntity=u.PacketEntity;var c=r(8);t.SendPropDefinition=c.SendPropDefinition,t.SendPropFlag=c.SendPropFlag,t.SendPropType=c.SendPropType;var l=r(14);t.SendProp=l.SendProp;var f=r(4);t.Vector=f.Vector},function(e,t,r){"use strict";var n=r(1),a=r(2);Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(9),s=r(36),u=r(16),c=r(25);!function(e){e[e.MINIMAL=0]="MINIMAL",e[e.ENTITIES=1]="ENTITIES",e[e.COMPLETE=2]="COMPLETE"}(i=t.ParseMode||(t.ParseMode={}));var l=function(){function e(t){n(this,e),this.stream=new o.BitStream(t)}return a(e,null,[{key:"fromNodeBuffer",value:function(t){return new e(t.buffer)}}]),a(e,[{key:"getParser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.ENTITIES;return this.parser||(this.parser=new c.Parser(this.stream,this.getSkippedPackets(e))),this.parser}},{key:"getAnalyser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.ENTITIES;return new s.Analyser(this.getParser(e))}},{key:"getSkippedPackets",value:function(e){switch(e){case i.MINIMAL:return[u.PacketTypeId.packetEntities,u.PacketTypeId.tempEntities,u.PacketTypeId.entityMessage];case i.ENTITIES:return[u.PacketTypeId.tempEntities];case i.COMPLETE:return[]}}}]),e}();t.Demo=l},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),o=n[0],s=n[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,s)),l=0,f=s>0?o-4:o;for(r=0;r<f;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===s&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,i=[],o=0,s=r-a;o<s;o+=16383)i.push(l(e,o,o+16383>s?s:o+16383));1===a?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],a=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)n[s]=o[s],a[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var a,i,o=[],s=t;s<r;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(i=a)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,a){var i,o,s=8*a-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?a-1:0,d=r?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+e[t+f],f+=d,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=d,l-=8);if(0===i)i=1-c;else{if(i===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),i-=c}return(h?-1:1)*o*Math.pow(2,i-n)},t.write=function(e,t,r,n,a,i){var o,s,u,c=8*i-a-1,l=(1<<c)-1,f=l>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,a),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[r+h]=255&s,h+=p,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[r+h]=255&o,h+=p,o/=256,c-=8);e[r+h-p]|=128*y}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";var n=r(21),a=r(0),i=r(1),o=r(2),s=r(10),u=r(11);Object.defineProperty(t,"__esModule",{value:!0});var c=r(44),l=r(23),f=r(3),d=function(e){s(r,e);var t=u(r);function r(e){var n;return i(this,r),(n=t.call(this)).analysed=!1,n.parser=e,n.match=new l.Match(n.parser.parserState),n}return o(r,[{key:"getHeader",value:function(){return this.parser.getHeader()}},{key:"getBody",value:function(){if(!this.analysed){var e,t=a(this.getPackets());try{for(t.s();!(e=t.n()).done;){var r=e.value;this.emit("packet",r)}}catch(n){t.e(n)}finally{t.f()}this.emit("done")}return this.analysed=!0,this.match}},{key:"getPackets",value:n.mark((function e(){var t,r,i,o,s,u;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a(this.parser.getMessages()),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=26;break}if((i=r.value).type!==f.MessageType.Packet){e.next=24;break}o=a(i.packets),e.prev=7,o.s();case 9:if((s=o.n()).done){e.next=16;break}return u=s.value,this.match.handlePacket(u,i),e.next=14,u;case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),o.e(e.t0);case 21:return e.prev=21,o.f(),e.finish(21);case 24:e.next=3;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.e(e.t1);case 31:return e.prev=31,t.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[1,28,31,34],[7,18,21,24]])}))},{key:"getMessages",value:n.mark((function e(){var t,r,i,o,s,u;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a(this.parser.getMessages()),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=10;break}if((i=r.value).type===f.MessageType.Packet){o=a(i.packets);try{for(o.s();!(s=o.n()).done;)u=s.value,this.match.handlePacket(u,i)}catch(n){o.e(n)}finally{o.f()}}return e.next=8,i;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])}))}]),r}(c.EventEmitter);t.Analyser=d},function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function s(e,t,r,n){var a=t&&t.prototype instanceof l?t:l,i=Object.create(a.prototype),o=new b(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return P()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=m(o,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,o),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=s;var c={};function l(){}function f(){}function d(){}var h={};h[a]=function(){return this};var p=Object.getPrototypeOf,y=p&&p(p(E([])));y&&y!==t&&r.call(y,a)&&(h=y);var v=d.prototype=l.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function _(e,t){var n;this._invoke=function(a,i){function o(){return new t((function(n,o){!function n(a,i,o,s){var c=u(e[a],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}(a,i,n,o)}))}return n=n?n.then(o,o):o()}}function m(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,m(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return f.prototype=v.constructor=d,d.constructor=f,d[o]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(_.prototype),_.prototype[i]=function(){return this},e.AsyncIterator=_,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new _(s(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(v),v[o]="Generator",v[a]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,b.prototype={constructor:b,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;w(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,r){var n=r(42),a=r(43);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?a(e):t}},function(e,t){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){"use strict";var n,a="object"===typeof Reflect?Reflect:null,i=a&&"function"===typeof a.apply?a.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=a&&"function"===typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,r,n){var a,i,o,s;if(c(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"===typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(a=l(e))>0&&o.length>a&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,s=u,console&&console.warn&&console.warn(s)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=d.bind(n);return a.listener=r,n.wrapFn=a,a}function p(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"===typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):v(a,a.length)}function y(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=a[e];if(void 0===u)return!1;if("function"===typeof u)i(u,this,t);else{var c=u.length,l=v(u,c);for(r=0;r<c;++r)i(l[r],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,a,i,o;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},s.prototype.listenerCount=y,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){a=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleGameEvent=function(e,t){switch(e.event.name){case"player_death":!function(e,t){var r=e.values;for(;r.assister>256&&r.assister<16384;)r.assister-=256;var n=r.assister<256?r.assister:null;for(;r.attacker>256;)r.attacker-=256;for(;r.userid>256;)r.userid-=256;t.deaths.push({killer:r.attacker,assister:n,victim:r.userid,weapon:r.weapon,tick:t.tick})}(e.event,t);break;case"teamplay_round_win":!function(e,t){var r=e.values;6!==r.winreason&&t.rounds.push({winner:2===r.team?"red":"blue",length:r.round_time,endTick:t.tick})}(e.event,t);break;case"player_spawn":!function(e,t){var r=e.values,n=r.userid,a=t.getUserInfo(n),i=t.playerEntityMap.get(a.entityId);a.team=2===r.team?"red":"blue";var o=r.class;i&&(i.classId=o,i.team=r.team);a.classes[o]||(a.classes[o]=0);a.classes[o]++}(e.event,t);break;case"object_destroyed":!function(e,t){var r=e.values;t.buildings.delete(r.index)}(e.event,t);break;case"teamplay_round_start":!function(e,t){t.buildings.clear()}(e.event,t)}}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.handleBaseEntity=function(e,t,r){var a,i=n(e.props);try{for(i.s();!(a=i.n()).done;){var o=a.value;"DT_AttributeContainer"===o.definition.ownerTableName&&"m_hOuter"===o.definition.name&&(t.outerMap.has(o.value)||t.outerMap.set(o.value,e.entityIndex)),"DT_AttributeManager"===o.definition.ownerTableName&&"m_hOuter"===o.definition.name&&(t.outerMap.has(o.value)||t.outerMap.set(o.value,e.entityIndex)),"DT_BaseCombatWeapon"===o.definition.ownerTableName&&"m_hOwner"===o.definition.name&&(t.weaponMap.has(e.entityIndex)||t.weaponMap.set(e.entityIndex,{className:e.serverClass.name,owner:o.value}))}}catch(s){i.e(s)}finally{i.f()}switch(e.serverClass.name){case"CWorld":t.world.boundaryMin=e.getProperty("DT_WORLD","m_WorldMins").value,t.world.boundaryMax=e.getProperty("DT_WORLD","m_WorldMaxs").value}}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(15);t.handleHL2DMEntity=function(e,t,r){switch(e.serverClass.name){case"CHL2MP_Player":var i=t.getUserInfoForEntity(e);if(!i)throw new Error("No user info for entity ".concat(e.entityIndex));if(i.entityId!==e.entityIndex)throw new Error("Invalid user info for entity ".concat(e.entityIndex," vs ").concat(i.entityId));var o=t.playerEntityMap.has(e.entityIndex)?t.playerEntityMap.get(e.entityIndex):new a.Player(t,i);t.playerEntityMap.has(e.entityIndex)||t.playerEntityMap.set(e.entityIndex,o);var s,u=n(e.props);try{for(u.s();!(s=u.n()).done;){var c=s.value;switch("m_hMyWeapons"===c.definition.ownerTableName&&2097151!==c.value&&(o.weaponIds[parseInt(c.definition.name,10)]=c.value),"m_iAmmo"===c.definition.ownerTableName&&null!==c.value&&c.value>0&&(o.ammo[parseInt(c.definition.name,10)]=c.value),c.definition.ownerTableName+"."+c.definition.name){case"DT_BaseEntity.m_iTeamNum":o.user.team||2!==c.value&&3!==c.value||(o.user.team=2===c.value?"red":"blue"),o.team=c.value;break;case"DT_BasePlayer.m_iHealth":o.health=c.value;break;case"DT_BasePlayer.m_iMaxHealth":o.maxHealth=c.value;break;case"DT_BaseEntity.m_vecOrigin":o.position.x=c.value.x,o.position.y=c.value.y,o.position.z=c.value.z;break;case"DT_HL2MP_Player.m_angEyeAngles[0]":case"DT_HL2MP_Player.m_angEyeAngles[1]":o.viewAngle=c.value;break;case"DT_BasePlayer.m_lifeState":o.lifeState=c.value;break;case"DT_BaseCombatCharacter.m_hActiveWeapon":for(var l=0;l<o.weapons.length;l++)o.weaponIds[l]===c.value&&(o.activeWeapon=l)}}}catch(E){u.e(E)}finally{u.f()}break;case"CTeam":if(e.hasProperty("DT_Team","m_iTeamNum")){var f=e.getProperty("DT_Team","m_iTeamNum").value;if(!t.teams.has(f)){var d={name:e.getProperty("DT_Team","m_szTeamname").value,score:e.getProperty("DT_Team","m_iScore").value,roundsWon:e.getProperty("DT_Team","m_iRoundsWon").value,players:e.getProperty("DT_Team",'"player_array"').value,teamNumber:f};t.teams.set(f,d),t.teamEntityMap.set(e.entityIndex,d)}}else{var h=t.teamEntityMap.get(e.entityIndex);if(!h)throw new Error("No team with entity id: ".concat(e.entityIndex));var p,y=n(e.props);try{for(y.s();!(p=y.n()).done;){var v=p.value;switch(v.definition.ownerTableName+"."+v.definition.name){case"DT_Team.m_iScore":h.score=v.value;break;case"DT_Team.m_szTeamname":h.name=v.value;break;case"DT_Team.m_iRoundsWon":h.roundsWon=v.value;break;case'DT_Team."player_array"':h.players=v.value}}}catch(E){y.e(E)}finally{y.f()}}break;case"CPlayerResource":var g,_=n(e.props);try{for(_.s();!(g=_.n()).done;){var m=g.value,T=parseInt(m.definition.name,10),w=m.value;t.playerResources[T]||(t.playerResources[T]={alive:!1,arenaSpectator:!1,bonusPoints:0,chargeLevel:0,connected:!1,damageAssists:0,damageBlocked:0,deaths:0,dominations:0,healing:0,healingAssist:0,health:0,killStreak:0,maxBuffedHealth:0,maxHealth:0,nextRespawn:0,ping:0,playerClass:0,playerLevel:0,score:0,team:0,totalScore:0,damage:0});var b=t.playerResources[T];switch(m.definition.ownerTableName){case"m_iPing":b.ping=w;break;case"m_iScore":b.score=w;break;case"m_iDeaths":b.deaths=w;break;case"m_bConnected":b.connected=w>0;break;case"m_iTeam":b.team=w;break;case"m_bAlive":b.alive=w>0;break;case"m_iHealth":b.health=w;break;case"m_iTotalScore":b.totalScore=w;break;case"m_iMaxHealth":b.maxHealth=w;break;case"m_iMaxBuffedHealth":b.maxBuffedHealth=w;break;case"m_iPlayerClass":b.playerClass=w;break;case"m_bArenaSpectator":b.arenaSpectator=w>0;break;case"m_iActiveDominations":b.dominations=w;break;case"m_flNextRespawnTime":b.nextRespawn=w;break;case"m_iChargeLevel":b.chargeLevel=w;break;case"m_iDamage":b.damage=w;break;case"m_iDamageAssist":b.damageAssists=w;break;case"m_iHealing":b.healing=w;break;case"m_iHealingAssist":b.healingAssist=w;break;case"m_iDamageBlocked":b.damageBlocked=w;break;case"m_iBonusPoints":b.bonusPoints=w;break;case"m_iPlayerLevel":b.playerLevel=w;break;case"m_iKillstreak":b.killStreak=w}}}catch(E){_.e(E)}finally{_.f()}}}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),i=r(15),o=r(19),s=r(4);function u(e,t,r){switch(r){case"DT_BaseObject.m_iUpgradeLevel":e.level=t.value;break;case"DT_BaseObject.m_hBuilder":e.builder=t.value;break;case"DT_BaseObject.m_iMaxHealth":e.maxHealth=t.value;break;case"DT_BaseObject.m_iHealth":e.health=t.value;break;case"DT_BaseObject.m_bBuilding":e.isBuilding=t.value>0;break;case"DT_BaseObject.m_bHasSapper":e.isSapped=t.value>0;break;case"DT_BaseEntity.m_vecOrigin":e.position=t.value;break;case"DT_BaseEntity.m_iTeamNum":e.team=t.value;break;case"DT_BaseEntity.m_angRotation":e.angle=t.value.y}}t.handleTFEntity=function(e,t,r){switch(e.serverClass.name){case"CTFPlayer":var c=t.getUserInfoForEntity(e);if(!c)throw new Error("No user info for entity ".concat(e.entityIndex));var l=t.playerEntityMap.has(e.entityIndex)?t.playerEntityMap.get(e.entityIndex):new i.Player(t,c);t.playerEntityMap.has(e.entityIndex)||t.playerEntityMap.set(e.entityIndex,l);var f,d=n(e.props);try{for(d.s();!(f=d.n()).done;){var h=f.value;switch("m_hMyWeapons"===h.definition.ownerTableName&&2097151!==h.value&&(l.weaponIds[parseInt(h.definition.name,10)]=h.value),"m_iAmmo"===h.definition.ownerTableName&&null!==h.value&&h.value>0&&(l.ammo[parseInt(h.definition.name,10)]=h.value),h.definition.ownerTableName+"."+h.definition.name){case"DT_BasePlayer.m_iHealth":l.health=h.value;break;case"DT_BasePlayer.m_iMaxHealth":l.maxHealth=h.value;break;case"DT_TFLocalPlayerExclusive.m_vecOrigin":l.position.x=h.value.x,l.position.y=h.value.y,l.viewAngle=r.localViewAngles[0].y,l.viewAngles.x=r.localViewAngles[0].x,l.viewAngles.y=r.localViewAngles[0].y,l.viewAngles.z=r.localViewAngles[0].z;break;case"DT_TFNonLocalPlayerExclusive.m_vecOrigin":l.position.x=h.value.x,l.position.y=h.value.y;break;case"DT_TFLocalPlayerExclusive.m_vecOrigin[2]":case"DT_TFNonLocalPlayerExclusive.m_vecOrigin[2]":l.position.z=h.value;break;case"DT_TFNonLocalPlayerExclusive.m_angEyeAngles[0]":l.viewAngles.y=h.value;break;case"DT_TFNonLocalPlayerExclusive.m_angEyeAngles[1]":l.viewAngle=h.value,l.viewAngles.x=h.value;break;case"DT_TFLocalPlayerExclusive.m_angEyeAngles[0]":l.viewAngles.y=h.value;break;case"DT_TFLocalPlayerExclusive.m_angEyeAngles[1]":l.viewAngle=h.value,l.viewAngles.x=h.value;break;case"DT_BasePlayer.m_lifeState":l.lifeState=h.value;break;case"DT_BaseCombatCharacter.m_hActiveWeapon":for(var p=0;p<l.weapons.length;p++)l.weaponIds[p]===h.value&&(l.activeWeapon=p)}}}catch($){d.e($)}finally{d.f()}break;case"CWeaponMedigun":var y=t.weaponMap.get(e.entityIndex);if(y&&"CWeaponMedigun"===y.className){var v,g=n(e.props);try{for(g.s();!(v=g.n()).done;){var _=v.value;switch(_.definition.ownerTableName+"."+_.definition.name){case"DT_WeaponMedigun.m_hHealingTarget":y.healTarget=t.outerMap.get(_.value);break;case"DT_TFWeaponMedigunDataNonLocal.m_flChargeLevel":case"DT_LocalTFWeaponMedigunData.m_flChargeLevel":y.chargeLevel=_.value}}}catch($){g.e($)}finally{g.f()}}break;case"CTFTeam":if(e.hasProperty("DT_Team","m_iTeamNum")){var m=e.getProperty("DT_Team","m_iTeamNum").value;if(!t.teams.has(m)){var T={name:e.getProperty("DT_Team","m_szTeamname").value,score:e.getProperty("DT_Team","m_iScore").value,roundsWon:e.getProperty("DT_Team","m_iRoundsWon").value,players:e.getProperty("DT_Team",'"player_array"').value,teamNumber:m};t.teams.set(m,T),t.teamEntityMap.set(e.entityIndex,T)}}else{var w=t.teamEntityMap.get(e.entityIndex);if(!w)throw new Error("No team with entity id: ".concat(e.entityIndex));var b,E=n(e.props);try{for(E.s();!(b=E.n()).done;){var P=b.value;switch(P.definition.ownerTableName+"."+P.definition.name){case"DT_Team.m_iScore":w.score=P.value;break;case"DT_Team.m_szTeamname":w.name=P.value;break;case"DT_Team.m_iRoundsWon":w.roundsWon=P.value;break;case'DT_Team."player_array"':w.players=P.value}}}catch($){E.e($)}finally{E.f()}}break;case"CObjectSentrygun":t.buildings.has(e.entityIndex)||t.buildings.set(e.entityIndex,{type:"sentry",ammoRockets:0,ammoShells:0,autoAimTarget:0,builder:0,health:0,isBuilding:!1,isSapped:!1,level:0,maxHealth:0,playerControlled:!1,position:new s.Vector(0,0,0),shieldLevel:0,isMini:!1,team:0,angle:0});var S,O=t.buildings.get(e.entityIndex),I=n(e.props);try{for(I.s();!(S=I.n()).done;){var x=S.value,C=x.definition.ownerTableName+"."+x.definition.name;switch(u(O,x,C),C){case"DT_ObjectSentrygun.m_bPlayerControlled":O.playerControlled=x.value>0;break;case"DT_ObjectSentrygun.m_hAutoAimTarget":O.autoAimTarget=x.value;break;case"DT_ObjectSentrygun.m_nShieldLevel":O.shieldLevel=x.value;break;case"DT_ObjectSentrygun.m_iAmmoShells":O.ammoShells=x.value;break;case"DT_ObjectSentrygun.m_iAmmoRockets":O.ammoRockets=x.value;break;case"DT_BaseObject.m_bMiniBuilding":O.isMini=x.value>1;break;case"DT_TFNonLocalPlayerExclusive.m_angEyeAngles[1]":O.angle=x.value}}}catch($){I.e($)}finally{I.f()}e.pvs&a.PVS.LEAVE&&t.buildings.delete(e.entityIndex);break;case"CObjectDispenser":t.buildings.has(e.entityIndex)||t.buildings.set(e.entityIndex,{type:"dispenser",builder:0,health:0,isBuilding:!1,isSapped:!1,level:0,maxHealth:0,position:new s.Vector(0,0,0),team:0,healing:[],metal:0,angle:0});var B,D=t.buildings.get(e.entityIndex),M=n(e.props);try{for(M.s();!(B=M.n()).done;){var k=B.value,A=k.definition.ownerTableName+"."+k.definition.name;switch(u(D,k,A),A){case"DT_ObjectDispenser.m_iAmmoMetal":D.metal=k.value;break;case'DT_ObjectDispenser."healing_array"':D.healing=k.value}}}catch($){M.e($)}finally{M.f()}e.pvs&a.PVS.LEAVE&&t.buildings.delete(e.entityIndex);break;case"CObjectTeleporter":t.buildings.has(e.entityIndex)||t.buildings.set(e.entityIndex,{type:"teleporter",builder:0,health:0,isBuilding:!1,isSapped:!1,level:0,maxHealth:0,position:new s.Vector(0,0,0),team:0,isEntrance:!1,otherEnd:0,rechargeTime:0,rechargeDuration:0,timesUsed:0,angle:0,yawToExit:0});var N,F=t.buildings.get(e.entityIndex),U=n(e.props);try{for(U.s();!(N=U.n()).done;){var R=N.value,L=R.definition.ownerTableName+"."+R.definition.name;switch(u(F,R,L),L){case"DT_ObjectTeleporter.m_flRechargeTime":F.rechargeTime=R.value;break;case"DT_ObjectTeleporter.m_flCurrentRechargeDuration":F.rechargeDuration=R.value;break;case"DT_ObjectTeleporter.m_iTimesUsed":F.timesUsed=R.value;break;case"DT_ObjectTeleporter.m_bMatchBuilding":F.otherEnd=R.value;break;case"DT_ObjectTeleporter.m_flYawToExit":F.yawToExit=R.value;break;case"DT_BaseObject.m_iObjectMode":F.isEntrance=0===R.value}}}catch($){U.e($)}finally{U.f()}e.pvs&a.PVS.LEAVE&&t.buildings.delete(e.entityIndex);break;case"CTFPlayerResource":var V,j=n(e.props);try{for(j.s();!(V=j.n()).done;){var H=V.value,G=parseInt(H.definition.name,10),Y=H.value;t.playerResources[G]||(t.playerResources[G]={alive:!1,arenaSpectator:!1,bonusPoints:0,chargeLevel:0,connected:!1,damageAssists:0,damageBlocked:0,deaths:0,dominations:0,healing:0,healingAssist:0,health:0,killStreak:0,maxBuffedHealth:0,maxHealth:0,nextRespawn:0,ping:0,playerClass:0,playerLevel:0,score:0,team:0,totalScore:0,damage:0});var W=t.playerResources[G];switch(H.definition.ownerTableName){case"m_iPing":W.ping=Y;break;case"m_iScore":W.score=Y;break;case"m_iDeaths":W.deaths=Y;break;case"m_bConnected":W.connected=Y>0;break;case"m_iTeam":W.team=Y;break;case"m_bAlive":W.alive=Y>0;break;case"m_iHealth":W.health=Y;break;case"m_iTotalScore":W.totalScore=Y;break;case"m_iMaxHealth":W.maxHealth=Y;break;case"m_iMaxBuffedHealth":W.maxBuffedHealth=Y;break;case"m_iPlayerClass":W.playerClass=Y;break;case"m_bArenaSpectator":W.arenaSpectator=Y>0;break;case"m_iActiveDominations":W.dominations=Y;break;case"m_flNextRespawnTime":W.nextRespawn=Y;break;case"m_iChargeLevel":W.chargeLevel=Y;break;case"m_iDamage":W.damage=Y;break;case"m_iDamageAssist":W.damageAssists=Y;break;case"m_iHealing":W.healing=Y;break;case"m_iHealingAssist":W.healingAssist=Y;break;case"m_iDamageBlocked":W.damageBlocked=Y;break;case"m_iBonusPoints":W.bonusPoints=Y;break;case"m_iPlayerLevel":W.playerLevel=Y;break;case"m_iKillstreak":W.killStreak=Y}}}catch($){j.e($)}finally{j.f()}break;case"CTeamRoundTimer":case"CLaserDot":break;case"CTFGrenadePipebombProjectile":case"CTFProjectile_HealingBolt":case"CTFProjectile_Rocket":var z=o.ProjectileServerClassMap[e.serverClass.name];if(!z)break;t.projectileEntityMap.has(e.entityIndex)||t.projectileEntityMap.set(e.entityIndex,{type:z,position:new s.Vector(0,0,0),rotation:new s.Vector(0,0,0),teamNumber:0});var K,q=t.projectileEntityMap.get(e.entityIndex),X=n(e.props);try{for(X.s();!(K=X.n()).done;){var J=K.value;switch(J.definition.name){case"m_vecOrigin":q.position=J.value;break;case"m_angRotation":q.rotation=J.value;break;case"m_iTeamNum":q.teamNumber=J.value;break;case"m_iType":q.type=q.type+J.value}}}catch($){X.e($)}finally{X.f()}e.pvs&a.PVS.LEAVE&&t.projectileEntityMap.delete(e.entityIndex)}}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.handleSayText2=function(e,t){if("#TF_Name_Change"!==e.kind)t.chat.push({kind:e.kind,from:e.from,text:e.text,tick:t.tick});else{var r,a=n(t.users.values());try{for(a.s();!(r=a.n()).done;){var i=r.value;i.name===e.from&&(i.name=e.text)}}catch(o){a.e(o)}finally{a.f()}}}},function(e,t,r){"use strict";var n=r(13);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGameEventList=function(e,t){t.eventDefinitions=e.eventList;var r=Array.from(e.eventList.entries()).map((function(e){var t=n(e,2),r=t[0];return[t[1].name,r]}));t.eventDefinitionTypes=new Map(r)}},function(e,t,r){"use strict";var n=r(0);function a(e,t){t.getStringTable(e.name)||t.stringTables.push(e),i(e.name,e.entries,t)}function i(e,t,r){if("userinfo"===e){var a,i=n(t);try{for(i.s();!(a=i.n()).done;){var u=a.value;u&&u.extraData&&o(u.text,u.extraData,r)}}catch(d){i.e(d)}finally{i.f()}}if("instancebaseline"===e){var c,l=n(t);try{for(l.s();!(c=l.n()).done;){var f=c.value;f&&s(f,r)}}catch(d){l.e(d)}finally{l.f()}}}function o(e,t,r){if(t.bitsLeft>256){for(var n=t.readUTF8String(32),a=t.readUint32();a>256;)a-=256;var i=t.readUTF8String();if(i){var o=parseInt(e,10)+1,s=r.userInfo.get(a);s||(s={name:"",userId:a,steamId:"",entityId:o},r.userInfo.set(s.userId,s)),s.name=n,s.steamId=i}}}function s(e,t){if(!e.extraData)throw new Error("Missing baseline");var r=parseInt(e.text,10);t.staticBaselineCache.delete(r),t.staticBaseLines.set(r,e.extraData)}Object.defineProperty(t,"__esModule",{value:!0}),t.handleStringTable=function(e,t){a(e.table,t)},t.handleStringTables=function(e,t){var r,i=n(e.tables);try{for(i.s();!(r=i.n()).done;){a(r.value,t)}}catch(o){i.e(o)}finally{i.f()}},t.handleStringTableUpdate=function(e,t){i(t.stringTables[e.tableId].name,e.entries,t)},t.handleTable=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHeader=function(e){return{type:e.readASCIIString(8),version:e.readInt32(),protocol:e.readInt32(),server:e.readASCIIString(260),nick:e.readASCIIString(260),map:e.readASCIIString(260),game:e.readASCIIString(260),duration:e.readFloat32(),ticks:e.readInt32(),frames:e.readInt32(),sigon:e.readInt32()}},t.encodeHeader=function(e,t){t.writeASCIIString(e.type,8),t.writeUint32(e.version),t.writeUint32(e.protocol),t.writeASCIIString(e.server,260),t.writeASCIIString(e.nick,260),t.writeASCIIString(e.map,260),t.writeASCIIString(e.game,260),t.writeFloat32(e.duration),t.writeUint32(e.ticks),t.writeUint32(e.frames),t.writeUint32(e.sigon)}},function(e,t,r){"use strict";var n=r(1),a=r(2),i=r(10),o=r(11);Object.defineProperty(t,"__esModule",{value:!0});var s=r(57),u=r(3),c=function(e){i(r,e);var t=o(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"parse",value:function(){return[{packetType:"consoleCmd",command:this.stream.readUTF8String()}]}}]),r}(r(58).Parser);t.ConsoleCmd=c,t.ConsoleCmdHandler={parseMessage:function(e){var t=e.readInt32(),r=e.readInt32(),n=e.readBitStream(8*r);return{type:u.MessageType.ConsoleCmd,tick:t,rawData:n,command:n.readUTF8String()}},encodeMessage:function(e,t){t.writeUint32(e.tick);var r=new s.TextEncoder("utf-8").encode(e.command).length+1;t.writeUint32(r),t.writeUTF8String(e.command)}}},function(e,t,r){var n,a,i;a=[],void 0===(i="function"===typeof(n=function(){"use strict";var e="undefined"!==typeof GLOBAL?GLOBAL:self;if("undefined"!==typeof e.TextEncoder&&"undefined"!==typeof e.TextDecoder)return{TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder};var t=["utf8","utf-8","unicode-1-1-utf-8"];return{TextEncoder:function(e){if(t.indexOf(e)<0&&"undefined"!==typeof e&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.encode=function(e){if("string"!==typeof e)throw new TypeError("passed argument must be of tye string");var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);return t.split("").forEach((function(e,t){r[t]=e.charCodeAt(0)})),r}},TextDecoder:function(e,r){if(t.indexOf(e)<0&&"undefined"!==typeof e&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");if(this.encoding="utf-8",this.ignoreBOM=!1,this.fatal="undefined"!==typeof r&&fatal in r&&r.fatal,"boolean"!==typeof this.fatal)throw new TypeError("fatal flag must be boolean");this.decode=function(e,t){if("undefined"===typeof e)return"";var r="undefined"!==typeof t&&r in t&&t.stream;if("boolean"!==typeof r)throw new TypeError("stream option must be boolean");if(ArrayBuffer.isView(e)){var n=new Uint8Array(e.buffer),a=new Array(n.length);return n.forEach((function(e,t){a[t]=String.fromCharCode(e)})),decodeURIComponent(escape(a.join("")))}throw new TypeError("passed argument must be an array buffer view")}}}})?n.apply(t,a):n)||(e.exports=i)},function(e,t,r){"use strict";var n=r(1);Object.defineProperty(t,"__esModule",{value:!0});t.Parser=function e(t,r,a,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];n(this,e),this.type=t,this.tick=r,this.stream=a,this.length=i,this.state=o,this.skippedPackets=s}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),i=r(8),o=r(60),s=r(61);function u(e,t){if(e.writeBits(t.type,5),e.writeASCIIString(t.name),e.writeBits(t.flags,16),t.type===i.SendPropType.DPT_DataTable){if(!t.table)throw new Error("Missing linked table");e.writeASCIIString(t.table.name)}else if(t.isExcludeProp()){if(!t.excludeDTName)throw new Error("Missing linked table");e.writeASCIIString(t.excludeDTName)}else t.type===i.SendPropType.DPT_Array?e.writeBits(t.numElements,10):(e.writeFloat32(t.lowValue),e.writeFloat32(t.highValue),t.hasFlag(i.SendPropFlag.SPROP_NOSCALE)&&(t.type===i.SendPropType.DPT_Float||t.type===i.SendPropType.DPT_Vector&&!t.hasFlag(i.SendPropFlag.SPROP_NORMAL))?null===t.originalBitCount||"undefined"===typeof t.originalBitCount?e.writeBits(t.bitCount/3,7):e.writeBits(t.originalBitCount,7):e.writeBits(t.bitCount,7))}t.DataTableHandler={parseMessage:function(e){for(var t=e.readInt32(),r=e.readInt32(),u=e.readBitStream(8*r),c=[],l=new Map;u.readBoolean();){var f=u.readBoolean(),d=u.readASCIIString(),h=u.readBits(10),p=new o.SendTable(d);p.needsDecoder=f;for(var y=void 0,v=0;v<h;v++){var g=u.readBits(5),_=u.readASCIIString(),m=u.readBits(16),T=new i.SendPropDefinition(g,_,m,d);if(g===i.SendPropType.DPT_DataTable||T.isExcludeProp()?T.excludeDTName=u.readASCIIString():T.type===i.SendPropType.DPT_Array?T.numElements=u.readBits(10):(T.lowValue=u.readFloat32(),T.highValue=u.readFloat32(),T.bitCount=u.readBits(7)),T.hasFlag(i.SendPropFlag.SPROP_NOSCALE)&&(T.type===i.SendPropType.DPT_Float?(T.originalBitCount=T.bitCount,T.bitCount=32):T.type===i.SendPropType.DPT_Vector&&(T.hasFlag(i.SendPropFlag.SPROP_NORMAL)||(T.originalBitCount=T.bitCount,T.bitCount=96))),y){if(T.type!==i.SendPropType.DPT_Array)throw new Error("expected prop of type array");T.arrayProperty=y,y=null}if(T.hasFlag(i.SendPropFlag.SPROP_INSIDEARRAY)){if(y)throw new Error("array element already set");if(T.hasFlag(i.SendPropFlag.SPROP_CHANGES_OFTEN))throw new Error("unexpected CHANGES_OFTEN prop in array");y=T}else p.addProp(T)}c.push(p),l.set(p.name,p)}for(var w=0,b=c;w<b.length;w++){var E,P=b[w],S=n(P.props);try{for(S.s();!(E=S.n()).done;){var O=E.value;if(O.type===i.SendPropType.DPT_DataTable&&O.excludeDTName){var I=l.get(O.excludeDTName);if(!I)throw new Error("Unknown referenced table ".concat(O.excludeDTName));O.table=I,O.excludeDTName=null}}}catch(A){S.e(A)}finally{S.f()}}var x=u.readUint16(),C=[];if(x<=0)throw new Error("expected one or more serverclasses");for(var B=0;B<x;B++){var D=u.readUint16();if(D>x)throw new Error("invalid class id");var M=u.readASCIIString(),k=u.readASCIIString();C.push(new s.ServerClass(D,M,k))}if(u.bitsLeft>7)throw new Error("unexpected remaining data in datatable ("+u.bitsLeft+" bits)");return{type:a.MessageType.DataTables,tick:t,rawData:u,tables:c,serverClasses:C}},encodeMessage:function(e,t){t.writeUint32(e.tick);var r=t.index;t.index+=32;var a,i=t.index,o=n(e.tables);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.writeBoolean(!0),t.writeBoolean(s.needsDecoder),t.writeASCIIString(s.name);var c=t.index;t.index+=10;var l,f=0,d=n(s.props);try{for(d.s();!(l=d.n()).done;){var h=l.value;h.arrayProperty&&(u(t,h.arrayProperty),f++),u(t,h),f++}}catch(T){d.e(T)}finally{d.f()}var p=t.index;t.index=c,t.writeBits(f,10),t.index=p}}catch(T){o.e(T)}finally{o.f()}t.writeBoolean(!1),t.writeUint16(e.serverClasses.length);var y,v=n(e.serverClasses);try{for(v.s();!(y=v.n()).done;){var g=y.value;t.writeUint16(g.id),t.writeASCIIString(g.name),t.writeASCIIString(g.dataTable)}}catch(T){v.e(T)}finally{v.f()}var _=t.index;t.index=r;var m=Math.ceil((_-i)/8);t.writeUint32(m),t.index=i+8*m}}},function(e,t,r){"use strict";var n=r(0),a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),s=function(){function e(t){a(this,e),this.name=t,this.props=[],this.cachedFlattenedProps=[]}return i(e,[{key:"addProp",value:function(e){this.props.push(e)}},{key:"getAllProps",value:function(e,t){var r=[];this.getAllPropsIteratorProps(e,r,t);for(var n=0,a=r;n<a.length;n++){var i=a[n];t.push(i)}}},{key:"getAllPropsIteratorProps",value:function(e,t,r){var a,i=n(this.props);try{var s=function(){var n=a.value;return n.hasFlag(o.SendPropFlag.SPROP_EXCLUDE)||e.filter((function(e){return e.name===n.name&&e.excludeDTName===n.ownerTableName})).length>0?"continue":void(n.type===o.SendPropType.DPT_DataTable&&n.table?n.hasFlag(o.SendPropFlag.SPROP_COLLAPSIBLE)?n.table.getAllPropsIteratorProps(e,t,r):n.table.getAllProps(e,r):t.push(n))};for(i.s();!(a=i.n()).done;)s()}catch(u){i.e(u)}finally{i.f()}}},{key:"flatten",value:function(){var e=this.excludes,t=[];this.getAllProps(e,t);for(var r=0,n=0;n<t.length;n++)if(t[n].hasFlag(o.SendPropFlag.SPROP_CHANGES_OFTEN)){if(n!==r){var a=t[n];t[n]=t[r],t[r]=a}r++}this.cachedFlattenedProps=t}},{key:"flattenedProps",get:function(){return 0===this.cachedFlattenedProps.length&&this.flatten(),this.cachedFlattenedProps}},{key:"excludes",get:function(){var e,t=[],r=n(this.props);try{for(r.s();!(e=r.n()).done;){var a=e.value;a.hasFlag(o.SendPropFlag.SPROP_EXCLUDE)?t.push(a):a.type===o.SendPropType.DPT_DataTable&&a.table&&(t=t.concat(a.table.excludes))}}catch(i){r.e(i)}finally{r.f()}return t}}]),e}();t.SendTable=s},function(e,t,r){"use strict";var n=r(1);Object.defineProperty(t,"__esModule",{value:!0});t.ServerClass=function e(t,r,a){n(this,e),this.id=t,this.name=r,this.dataTable=a}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(63),i=r(64),o=r(65),s=r(70),u=r(72),c=r(73),l=r(29),f=r(74),d=r(75),h=r(76),p=r(81),y=r(82),v=r(85),g=r(86),_=r(3),m=r(16),T=r(4),w=new Map([[m.PacketTypeId.file,l.make("file","transferId{32}fileName{s}requested{b}")],[m.PacketTypeId.netTick,l.make("netTick","tick{32}frameTime{16}stdDev{16}")],[m.PacketTypeId.stringCmd,l.make("stringCmd","command{s}")],[m.PacketTypeId.setConVar,{parser:d.ParseSetConVar,encoder:d.EncodeSetConVar}],[m.PacketTypeId.sigOnState,l.make("sigOnState","state{8}count{32}")],[m.PacketTypeId.print,l.make("print","value{s}")],[m.PacketTypeId.serverInfo,l.make("serverInfo","version{16}serverCount{32}stv{b}dedicated{b}maxCrc{32}maxClasses{16}mapHash{128}playerCount{8}maxPlayerCount{8}intervalPerTick{f32}platform{s1}game{s}map{s}skybox{s}serverName{s}replay{b}")],[m.PacketTypeId.classInfo,{parser:i.ParseClassInfo,encoder:i.EncodeClassInfo}],[m.PacketTypeId.setPause,l.make("setPause","paused{b}")],[m.PacketTypeId.createStringTable,{parser:o.ParseCreateStringTable,encoder:o.EncodeCreateStringTable}],[m.PacketTypeId.updateStringTable,{parser:p.ParseUpdateStringTable,encoder:p.EncodeUpdateStringTable}],[m.PacketTypeId.voiceInit,{parser:g.ParseVoiceInit,encoder:g.EncodeVoiceInit}],[m.PacketTypeId.voiceData,{parser:v.ParseVoiceData,encoder:v.EncodeVoiceData}],[m.PacketTypeId.parseSounds,{parser:f.ParseParseSounds,encoder:f.EncodeParseSounds}],[m.PacketTypeId.setView,l.make("setView","index{11}")],[m.PacketTypeId.fixAngle,l.make("fixAngle","relative{b}x{16}y{16}z{16}")],[m.PacketTypeId.bspDecal,{parser:a.ParseBSPDecal,encoder:a.EncodeBSPDecal}],[m.PacketTypeId.userMessage,{parser:y.ParseUserMessage,encoder:y.EncodeUserMessage}],[m.PacketTypeId.entityMessage,l.make("entityMessage","index{11}classId{9}length{11}data{$length}")],[m.PacketTypeId.gameEvent,{parser:s.ParseGameEvent,encoder:s.EncodeGameEvent}],[m.PacketTypeId.packetEntities,{parser:c.ParsePacketEntities,encoder:c.EncodePacketEntities}],[m.PacketTypeId.tempEntities,{parser:h.ParseTempEntities,encoder:h.EncodeTempEntities}],[m.PacketTypeId.preFetch,l.make("preFetch","index{14}")],[m.PacketTypeId.menu,l.make("menu","type{u16}length{u16}data{$length*8}")],[m.PacketTypeId.gameEventList,{parser:u.ParseGameEventList,encoder:u.EncodeGameEventList}],[m.PacketTypeId.getCvarValue,l.make("getCvarValue","cookie{32}value{s}")],[m.PacketTypeId.cmdKeyValues,l.make("cmdKeyValues","length{32}data{$length}")]]);t.PacketMessageHandler={parseMessage:function(e,t){for(var r=e.readInt32(),n=e.readInt32(),a=[new T.Vector(0,0,0),new T.Vector(0,0,0)],i=[new T.Vector(0,0,0),new T.Vector(0,0,0)],o=[new T.Vector(0,0,0),new T.Vector(0,0,0)],s=0;s<2;s++)a[s]=new T.Vector(e.readFloat32(),e.readFloat32(),e.readFloat32()),i[s]=new T.Vector(e.readFloat32(),e.readFloat32(),e.readFloat32()),o[s]=new T.Vector(e.readFloat32(),e.readFloat32(),e.readFloat32());for(var u=e.readInt32(),c=e.readInt32(),l=e.readInt32(),f=e.readBitStream(8*l),d=[],h=0;f.bitsLeft>6;){var p=f.readBits(6);if(0!==p){var y=w.get(p);if(!y)throw new Error("Unknown packet type ".concat(p," just parsed a ").concat(m.PacketTypeId[h]));var v=-1!==t.skippedPackets.indexOf(p),g=y.parser(f,t,v);d.push(g),h=p}}return{type:_.MessageType.Packet,tick:r,rawData:f,packets:d,flags:n,viewOrigin:a,viewAngles:i,localViewAngles:o,sequenceIn:u,sequenceOut:c}},encodeMessage:function(e,t,r){t.writeUint32(e.tick),t.writeUint32(e.flags);for(var a=0;a<2;a++)t.writeFloat32(e.viewOrigin[a].x),t.writeFloat32(e.viewOrigin[a].y),t.writeFloat32(e.viewOrigin[a].z),t.writeFloat32(e.viewAngles[a].x),t.writeFloat32(e.viewAngles[a].y),t.writeFloat32(e.viewAngles[a].z),t.writeFloat32(e.localViewAngles[a].x),t.writeFloat32(e.localViewAngles[a].y),t.writeFloat32(e.localViewAngles[a].z);t.writeUint32(e.sequenceIn),t.writeUint32(e.sequenceOut);var i=t.index;t.index+=32;var o,s=t.index,u=n(e.packets);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=m.PacketTypeId[c.packetType];t.writeBits(l,6);var f=w.get(l);if(!f)throw new Error("No handler for packet type ".concat(c.packetType));f.encoder(c,t,r)}}catch(p){u.e(p)}finally{u.f()}t.writeBits(0,6);var d=t.index;t.index=i;var h=Math.ceil((d-s)/8);t.writeUint32(h),t.index=s+8*h}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26),a=r(18);function i(e){var t=e.readBoolean(),r=e.readBoolean(),n=e.readBoolean();return{x:t?a.SendPropParser.readBitCoord(e):0,y:r?a.SendPropParser.readBitCoord(e):0,z:n?a.SendPropParser.readBitCoord(e):0}}function o(e,t){t.writeBoolean(0!==e.x),t.writeBoolean(0!==e.y),t.writeBoolean(0!==e.z),0!==e.x&&n.SendPropEncoder.writeBitCoord(e.x,t),0!==e.y&&n.SendPropEncoder.writeBitCoord(e.y,t),0!==e.z&&n.SendPropEncoder.writeBitCoord(e.z,t)}t.getVecCoord=i,t.encodeVecCoord=o,t.ParseBSPDecal=function(e){var t=0,r=0,n=i(e),a=e.readBits(9);return e.readBoolean()&&(r=e.readBits(11),t=e.readBits(12)),{packetType:"bspDecal",position:n,textureIndex:a,entIndex:r,modelIndex:t,lowPriority:e.readBoolean()}},t.EncodeBSPDecal=function(e,t){o(e.position,t),t.writeBits(e.textureIndex,9),e.entIndex||e.modelIndex?(t.writeBoolean(!0),t.writeBits(e.entIndex,11),t.writeBits(e.modelIndex,12)):t.writeBoolean(!1),t.writeBoolean(e.lowPriority)}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(5);t.ParseClassInfo=function(e){var t=e.readUint16(),r=e.readBoolean(),n=[];if(!r)for(var i=a.logBase2(t)+1,o=0;o<t;o++){var s={classId:e.readBits(i),className:e.readASCIIString(),dataTableName:e.readASCIIString()};n.push(s)}return{packetType:"classInfo",number:t,create:r,entries:n}},t.EncodeClassInfo=function(e,t){if(t.writeUint16(e.number),t.writeBoolean(e.create),!e.create){var r,i=a.logBase2(e.number)+1,o=n(e.entries);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.writeBits(s.classId,i),t.writeASCIIString(s.className),t.writeASCIIString(s.dataTableName)}}catch(u){o.e(u)}finally{o.f()}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),a=r(5),i=r(6),o=r(66),s=r(27);t.ParseCreateStringTable=function(e){var t=e.readASCIIString(),r=e.readUint16(),u=a.logBase2(r),c=e.readBits(u+1),l=i.readVarInt(e),f=0,d=0;e.readBoolean()&&(f=e.readBits(12),d=e.readBits(4));var h=e.readBoolean(),p=e.readBitStream(l);if(h){var y=p.readUint32(),v=p.readUint32(),g=p.readASCIIString(4),_=p.readArrayBuffer(v-4);if("SNAP"!==g)throw new Error("Unknown compressed stringtable format");var m=o.uncompress(_);if(m.byteLength!==y)throw new Error("Incorrect length of decompressed stringtable");p=new n.BitStream(m.buffer)}var T={name:t,entries:[],maxEntries:r,fixedUserDataSize:f,fixedUserDataSizeBits:d,compressed:h};return T.entries=s.parseStringTableEntries(p,T,c),{packetType:"createStringTable",table:T}},t.EncodeCreateStringTable=function(e,t){t.writeASCIIString(e.table.name),t.writeUint16(e.table.maxEntries);var r=a.logBase2(e.table.maxEntries),u=e.table.entries.filter((function(e){return e})).length;t.writeBits(u,r+1);var c=new n.BitStream(new ArrayBuffer(s.guessStringTableEntryLength(e.table,e.table.entries)));if(s.encodeStringTableEntries(c,e.table,e.table.entries),e.table.compressed){var l=Math.ceil(c.length/8);c.index=0;var f=o.compress(c.readArrayBuffer(l));(c=new n.BitStream(new ArrayBuffer(l))).writeUint32(l),c.writeUint32(f.byteLength+4),c.writeASCIIString("SNAP",4);var d=f.buffer;c.writeArrayBuffer(d)}var h=c.index;c.index=0,i.writeVarInt(h,t),e.table.fixedUserDataSize||e.table.fixedUserDataSizeBits?(t.writeBoolean(!0),t.writeBits(e.table.fixedUserDataSize||0,12),t.writeBits(e.table.fixedUserDataSizeBits||0,4)):t.writeBoolean(!1),t.writeBoolean(e.table.compressed),h&&t.writeBitStream(c,h)}},function(e,t,r){"use strict";(function(e,n){function a(){return"object"===typeof e&&"object"===typeof e.versions&&"undefined"!==typeof e.versions.node}function i(e){return e instanceof Uint8Array&&(!a()||!n.isBuffer(e))}function o(e){return e instanceof ArrayBuffer}function s(e){return!!a()&&n.isBuffer(e)}var u=r(68).SnappyDecompressor,c=r(69).SnappyCompressor,l="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";t.uncompress=function(e){if(!i(e)&&!o(e)&&!s(e))throw new TypeError(l);var t=!1,r=!1;i(e)?t=!0:o(e)&&(r=!0,e=new Uint8Array(e));var a,c,f=new u(e),d=f.readUncompressedLength();if(-1===d)throw new Error("Invalid Snappy bitstream");if(t){if(a=new Uint8Array(d),!f.uncompressToBuffer(a))throw new Error("Invalid Snappy bitstream")}else if(r){if(a=new ArrayBuffer(d),c=new Uint8Array(a),!f.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else if(a=n.alloc(d),!f.uncompressToBuffer(a))throw new Error("Invalid Snappy bitstream");return a},t.compress=function(e){if(!i(e)&&!o(e)&&!s(e))throw new TypeError(l);var t=!1,r=!1;i(e)?t=!0:o(e)&&(r=!0,e=new Uint8Array(e));var a,u,f,d=new c(e),h=d.maxCompressedLength();return t?(a=new Uint8Array(h),f=d.compressToBuffer(a)):r?(a=new ArrayBuffer(h),u=new Uint8Array(a),f=d.compressToBuffer(u)):(a=n.alloc(h),f=d.compressToBuffer(a)),a.slice(0,f)}}).call(this,r(67),r(20).Buffer)},function(e,t){var r,n,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){"use strict";var n=[0,255,65535,16777215,4294967295];function a(e,t,r,n,a){var i;for(i=0;i<a;i++)r[n+i]=e[t+i]}function i(e,t,r,n){var a;for(a=0;a<n;a++)e[t+a]=e[t-r+a]}function o(e){this.array=e,this.pos=0}o.prototype.readUncompressedLength=function(){for(var e,t,r=0,n=0;n<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<n>>>n!==t)return-1;if(r|=t<<n,e<128)return r;n+=7}return-1},o.prototype.uncompressToBuffer=function(e){for(var t,r,o,s,u=this.array,c=u.length,l=this.pos,f=0;l<u.length;)if(t=u[l],l+=1,0===(3&t)){if((r=1+(t>>>2))>60){if(l+3>=c)return!1;o=r-60,r=1+((r=u[l]+(u[l+1]<<8)+(u[l+2]<<16)+(u[l+3]<<24))&n[o]),l+=o}if(l+r>c)return!1;a(u,l,e,f,r),l+=r,f+=r}else{switch(3&t){case 1:r=4+(t>>>2&7),s=u[l]+(t>>>5<<8),l+=1;break;case 2:if(l+1>=c)return!1;r=1+(t>>>2),s=u[l]+(u[l+1]<<8),l+=2;break;case 3:if(l+3>=c)return!1;r=1+(t>>>2),s=u[l]+(u[l+1]<<8)+(u[l+2]<<16)+(u[l+3]<<24),l+=4}if(0===s||s>f)return!1;i(e,f,s,r),f+=r}return!0},t.SnappyDecompressor=o},function(e,t,r){"use strict";var n=new Array(15);function a(e,t){return 506832829*e>>>t}function i(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function o(e,t,r){return e[t]===e[r]&&e[t+1]===e[r+1]&&e[t+2]===e[r+2]&&e[t+3]===e[r+3]}function s(e,t,r,n,a){return r<=60?(n[a]=r-1<<2,a+=1):r<256?(n[a]=240,n[a+1]=r-1,a+=2):(n[a]=244,n[a+1]=r-1&255,n[a+2]=r-1>>>8,a+=3),function(e,t,r,n,a){var i;for(i=0;i<a;i++)r[n+i]=e[t+i]}(e,t,n,a,r),a+r}function u(e,t,r,n){return n<12&&r<2048?(e[t]=1+(n-4<<2)+(r>>>8<<5),e[t+1]=255&r,t+2):(e[t]=2+(n-1<<2),e[t+1]=255&r,e[t+2]=r>>>8,t+3)}function c(e,t,r,n){for(;n>=68;)t=u(e,t,r,64),n-=64;return n>64&&(t=u(e,t,r,60),n-=60),u(e,t,r,n)}function l(e,t,r,u,l){for(var f=1;1<<f<=r&&f<=14;)f+=1;var d=32-(f-=1);"undefined"===typeof n[f]&&(n[f]=new Uint16Array(1<<f));var h,p=n[f];for(h=0;h<p.length;h++)p[h]=0;var y,v,g,_,m,T,w,b,E,P,S=t+r,O=t,I=t,x=!0;if(r>=15)for(y=S-15,g=a(i(e,t+=1),d);x;){T=32,_=t;do{if(v=g,w=T>>>5,T+=1,_=(t=_)+w,t>y){x=!1;break}g=a(i(e,_),d),m=O+p[v],p[v]=t-O}while(!o(e,t,m));if(!x)break;l=s(e,I,t-I,u,l);do{for(b=t,E=4;t+E<S&&e[t+E]===e[m+E];)E+=1;if(t+=E,l=c(u,l,b-m,E),I=t,t>=y){x=!1;break}p[a(i(e,t-1),d)]=t-1-O,m=O+p[P=a(i(e,t),d)],p[P]=t-O}while(o(e,t,m));if(!x)break;g=a(i(e,t+=1),d)}return I<S&&(l=s(e,I,S-I,u,l)),l}function f(e){this.array=e}f.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},f.prototype.compressToBuffer=function(e){var t,r=this.array,n=r.length,a=0,i=0;for(i=function(e,t,r){do{t[r]=127&e,(e>>>=7)>0&&(t[r]+=128),r+=1}while(e>0);return r}(n,e,i);a<n;)i=l(r,a,t=Math.min(n-a,65536),e,i),a+=t;return i},t.SnappyCompressor=f},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(71);function i(e,t){switch(t.type){case a.GameEventValueType.STRING:return e.readUTF8String();case a.GameEventValueType.FLOAT:return e.readFloat32();case a.GameEventValueType.LONG:return e.readUint32();case a.GameEventValueType.SHORT:return e.readUint16();case a.GameEventValueType.BYTE:return e.readUint8();case a.GameEventValueType.BOOLEAN:return e.readBoolean();case a.GameEventValueType.LOCAL:return null}}function o(e,t,r){switch(r.type){case a.GameEventValueType.STRING:if("string"!==typeof e)throw new Error("Invalid value for game event, expected string got ".concat(typeof e));return t.writeASCIIString(e);case a.GameEventValueType.FLOAT:if("number"!==typeof e)throw new Error("Invalid value for game event, expected number got ".concat(typeof e));return t.writeFloat32(e);case a.GameEventValueType.LONG:if("number"!==typeof e)throw new Error("Invalid value for game event, expected number got ".concat(typeof e));return t.writeUint32(e);case a.GameEventValueType.SHORT:if("number"!==typeof e)throw new Error("Invalid value for game event, expected number got ".concat(typeof e));return t.writeUint16(e);case a.GameEventValueType.BYTE:if("number"!==typeof e)throw new Error("Invalid value for game event, expected number got ".concat(typeof e));return t.writeUint8(e);case a.GameEventValueType.BOOLEAN:if("boolean"!==typeof e)throw new Error("Invalid value for game event, expected boolean got ".concat(typeof e));return t.writeBoolean(e)}}t.ParseGameEvent=function(e,t){var r=e.readBits(11),a=e.readBitStream(r),o=a.readBits(9),s=t.eventDefinitions.get(o);if(!s)throw new Error("Unknown game event type ".concat(o));return{packetType:"gameEvent",event:function(e,t){var r,a={},o=n(e.entries);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=i(t,s);null!==u&&(a[s.name]=u)}}catch(c){o.e(c)}finally{o.f()}return{name:e.name,values:a}}(s,a)}},t.EncodeGameEvent=function(e,t,r){var a=t.index;t.index+=11;var i=r.eventDefinitionTypes.get(e.event.name);if("undefined"===typeof i)throw new Error("Unknown game event type ".concat(e.event.name));var s=t.index;t.writeBits(i,9);var u=r.eventDefinitions.get(i);if("undefined"===typeof u)throw new Error("Unknown game event type ".concat(e.event.name));!function(e,t,r){var a,i=n(t.entries);try{for(i.s();!(a=i.n()).done;){var s=a.value,u=e.values[s.name];if("undefined"===typeof u)throw new Error("empty event value");o(u,r,s)}}catch(c){i.e(c)}finally{i.f()}}(e.event,u,t);var c=t.index;t.index=a,t.writeBits(c-s,11),t.index=c}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.STRING=1]="STRING",e[e.FLOAT=2]="FLOAT",e[e.LONG=3]="LONG",e[e.SHORT=4]="SHORT",e[e.BYTE=5]="BYTE",e[e.BOOLEAN=6]="BOOLEAN",e[e.LOCAL=7]="LOCAL"}(t.GameEventValueType||(t.GameEventValueType={}))},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.ParseGameEventList=function(e){for(var t=e.readBits(9),r=e.readBits(20),n=e.readBitStream(r),a=new Map,i=0;i<t;i++){for(var o=n.readBits(9),s=n.readASCIIString(),u=n.readBits(3),c=[];0!==u;)c.push({type:u,name:n.readASCIIString()}),u=n.readBits(3);a.set(o,{id:o,name:s,entries:c})}return{packetType:"gameEventList",eventList:a}},t.EncodeGameEventList=function(e,t){var r=Array.from(e.eventList.values());t.writeBits(r.length,9);var a=t.index;t.index+=20;for(var i=t.index,o=0,s=r;o<s.length;o++){var u=s[o];t.writeBits(u.id,9),t.writeASCIIString(u.name);var c,l=n(u.entries);try{for(l.s();!(c=l.n()).done;){var f=c.value;t.writeBits(f.type,3),t.writeASCIIString(f.name)}}catch(h){l.e(h)}finally{l.f()}t.writeBits(0,3)}var d=t.index;t.index=a,t.writeBits(d-i,20),t.index=d}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),i=r(17),o=r(28),s=r(6),u=new Map([[0,a.PVS.PRESERVE],[2,a.PVS.ENTER],[1,a.PVS.LEAVE],[3,a.PVS.LEAVE+a.PVS.DELETE]]),c=new Map([[a.PVS.PRESERVE,0],[a.PVS.ENTER,2],[a.PVS.LEAVE,1],[a.PVS.LEAVE+a.PVS.DELETE,3]]);function l(e){var t=e.readBits(2);return u.get(t)}function f(e,t){var r=c.get(e);if("undefined"===typeof r)throw new Error("Unknown pvs ".concat(e));t.writeBits(r,2)}function d(e,t,r,n){var s=i.getClassBits(r),u=r.serverClasses[e.readBits(s)],c=e.readBits(10),l=i.getSendTable(r,u.dataTable),f=r.instanceBaselines[n].get(t),d=new a.PacketEntity(u,t,a.PVS.ENTER);if(d.serialNumber=c,f)return d.props=f.map((function(e){return e.clone()})),d;var h=r.staticBaseLines.get(u.id);if(h){var p=r.staticBaselineCache.get(u.id);p||(h.index=0,p=o.getEntityUpdate(l,h),r.staticBaselineCache.set(u.id,p)),d.props=p.map((function(e){return e.clone()}))}return d}function h(e,t,r,n){var a=r.serverClasses.findIndex((function(t){return t&&e.serverClass.id===t.id}));if(-1===a)throw new Error("Unknown server class ".concat(e.serverClass.name,"(").concat(e.serverClass.id,")"));var s=r.serverClasses[a];t.writeBits(a,i.getClassBits(r)),t.writeBits(e.serialNumber||0,10);var u=i.getSendTable(r,s.dataTable),c=r.instanceBaselines[n].get(e.entityIndex);if(!c){var l=r.staticBaseLines.get(s.id);l&&((c=r.staticBaselineCache.get(s.id))||(l.index=0,c=o.getEntityUpdate(u,l),r.staticBaselineCache.set(s.id,c)))}var f=c?e.diffFromBaseLine(c):e.props;o.encodeEntityUpdate(f,u,t)}function p(e,t,r){var n=t.entityClasses.get(e);if(!n)throw new Error('"unknown entity '.concat(e," for ").concat(a.PVS[r],"(").concat(r,")"));return new a.PacketEntity(n,e,r)}t.ParsePacketEntities=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.readBits(11),u=e.readBoolean(),c=u?e.readInt32():0,f=e.readBits(1),h=e.readBits(11),y=e.readBits(20),v=e.readBoolean(),g=(e.index,e.index+y),_=-1,m=[],T=[];if(!r){v&&(t.instanceBaselines[1-f]=new Map(t.instanceBaselines[f]));for(var w=0;w<h;w++){var b=s.readUBitVar(e);_+=1+b;var E=l(e);if(E===a.PVS.ENTER){var P=d(e,_,t,f),S=i.getSendTable(t,P.serverClass.dataTable),O=o.getEntityUpdate(S,e);P.applyPropUpdate(O),v&&t.instanceBaselines[1-f].set(_,P.clone().props),P.inPVS=!0,m.push(P)}else if(E===a.PVS.PRESERVE){var I=p(_,t,E),x=t.sendTables.get(I.serverClass.dataTable);if(!x)throw new Error("Unknown sendTable ".concat(I.serverClass.dataTable));var C=o.getEntityUpdate(x,e);I.applyPropUpdate(C),m.push(I)}else if(t.entityClasses.has(_)){var B=p(_,t,E);m.push(B)}}if(u)for(;e.readBoolean();)T.push(e.readBits(11))}return e.index=g,{packetType:"packetEntities",entities:m,removedEntities:T,maxEntries:n,delta:c,baseLine:f,updatedBaseLine:v}},t.EncodePacketEntities=function(e,t,r){t.writeBits(e.maxEntries,11);var u=e.delta>0;t.writeBoolean(u),u&&t.writeInt32(e.delta),t.writeBits(e.baseLine,1),t.writeBits(e.entities.length,11);var c=t.index;t.index+=20,t.writeBoolean(e.updatedBaseLine);var l=t.index,d=-1;e.updatedBaseLine&&(r.instanceBaselines[1-e.baseLine]=new Map(r.instanceBaselines[e.baseLine]));var p,y=n(e.entities);try{for(y.s();!(p=y.n()).done;){var v=p.value,g=v.entityIndex-d;if(d=v.entityIndex,s.writeBitVar(g-1,t),f(v.pvs,t),v.pvs===a.PVS.ENTER)e.updatedBaseLine&&r.instanceBaselines[1-e.baseLine].set(v.entityIndex,v.clone().props),h(v,t,r,e.baseLine);else if(v.pvs===a.PVS.PRESERVE){var _=i.getSendTable(r,v.serverClass.dataTable);o.encodeEntityUpdate(v.props,_,t)}}}catch(E){y.e(E)}finally{y.f()}if(u){var m,T=n(e.removedEntities);try{for(T.s();!(m=T.n()).done;){var w=m.value;t.writeBoolean(!0),t.writeBits(w,11)}}catch(E){T.e(E)}finally{T.f()}t.writeBoolean(!1)}var b=t.index;t.index=c,t.writeBits(b-l,20),t.index=b}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseParseSounds=function(e){var t=e.readBoolean(),r=t?1:e.readUint8(),n=t?e.readUint8():e.readUint16();return{packetType:"parseSounds",reliable:t,num:r,length:n,data:e.readBitStream(n)}},t.EncodeParseSounds=function(e,t){t.writeBoolean(e.reliable),e.reliable?t.writeUint8(e.length):(t.writeUint8(e.num),t.writeUint16(e.length)),e.data.index=0,t.writeBitStream(e.data,e.length),e.data.index=0}},function(e,t,r){"use strict";var n=r(13),a=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.ParseSetConVar=function(e){for(var t=e.readUint8(),r=new Map,n=0;n<t;n++){var a=e.readUTF8String(),i=e.readUTF8String();r.set(a,i)}return{packetType:"setConVar",vars:r}},t.EncodeSetConVar=function(e,t){t.writeUint8(e.vars.size);var r,i=a(e.vars.entries());try{for(i.s();!(r=i.n()).done;){var o=n(r.value,2),s=o[0],u=o[1];t.writeUTF8String(s),t.writeUTF8String(u)}}catch(c){i.e(c)}finally{i.f()}}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),i=r(17),o=r(77),s=r(28),u=r(6);t.ParseTempEntities=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.readUint8(),o=u.readVarInt(e),c=e.readBitStream(o),l=null,f=[];if(!r){for(var d=0;d<n;d++){var h=c.readBoolean()?c.readUint8()/100:0;if(c.readBoolean()){var p=c.readBits(i.getClassBits(t)),y=t.serverClasses[p-1];if(!y)throw new Error("Unknown serverClass ".concat(p));var v=i.getSendTable(t,y.dataTable);(l=new a.PacketEntity(y,0,a.PVS.ENTER)).delay=h,l.props=s.getEntityUpdate(v,c),f.push(l)}else{if(!l)throw new Error("no entity set to update");var g=i.getSendTable(t,l.serverClass.dataTable),_=s.getEntityUpdate(g,c);(l=l.clone()).applyPropUpdate(_),f.push(l)}}if(c.bitsLeft>8)throw new Error("unexpected content after TempEntities ".concat(c.bitsLeft," bits"))}return{packetType:"tempEntities",entities:f}},t.EncodeTempEntities=function(e,t,r){t.writeUint8(e.entities.length);var a,c=new o.DynamicBitStream,l=n(e.entities);try{var f=function(){var e=a.value;e.delay?(c.writeBoolean(!0),c.writeUint8(Math.round(100*e.delay))):c.writeBoolean(!1),c.writeBoolean(!0);var t=r.serverClasses.findIndex((function(t){return t&&t.name===e.serverClass.name}))+1;c.writeBits(t,i.getClassBits(r));var n=i.getSendTable(r,e.serverClass.dataTable);s.encodeEntityUpdate(e.props,n,c)};for(l.s();!(a=l.n()).done;)f()}catch(h){l.e(h)}finally{l.f()}var d=c.index;c.index=0,u.writeVarInt(d,t),d>0&&t.writeBitStream(c,d)}},function(e,t,r){"use strict";var n=r(1),a=r(2),i=r(10),o=r(11);Object.defineProperty(t,"__esModule",{value:!0});var s=r(9),u=r(78),c=function(e){i(r,e);var t=o(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16384;return n(this,r),t.call(this,new u.DynamicBitView(new ArrayBuffer(e)))}return a(r,[{key:"length",get:function(){return 8*this.view.byteLength}}]),r}(s.BitStream);t.DynamicBitStream=c},function(e,t,r){"use strict";var n=r(1),a=r(2),i=r(79),o=r(12),s=r(10),u=r(11);Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){s(r,e);var t=u(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"setBits",value:function(e,t,n){return n>8*this.byteLength-e&&this.grow(),i(o(r.prototype),"setBits",this).call(this,e,t,n)}},{key:"grow",value:function(){var e=new Uint8Array(2*this.byteLength);e.set(this._view),this._view=e}}]),r}(r(9).BitView);t.DynamicBitView=c},function(e,t,r){var n=r(80);function a(t,r,i){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(r):i.value}},a(t,r,i||t)}e.exports=a},function(e,t,r){var n=r(12);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27);t.ParseUpdateStringTable=function(e,t){var r=e.readBits(5),a=e.readBoolean()?e.readUint16():1,i=e.readBits(20),o=e.readBitStream(i);if(o.index=0,!t.stringTables[r])throw new Error("Table not found for update: ".concat(r));var s=t.stringTables[r];return{packetType:"updateStringTable",entries:n.parseStringTableEntries(o,s,a,s.entries),tableId:r}},t.EncodeUpdateStringTable=function(e,t,r){t.writeBits(e.tableId,5);var a=e.entries.filter((function(e){return e})).length,i=a>1;if(t.writeBoolean(i),i&&t.writeUint16(a),!r.stringTables[e.tableId])throw new Error("Table not found for update: ".concat(e.tableId));var o=t.index;t.index+=20;var s=t.index,u=r.stringTables[e.tableId];n.encodeStringTableEntries(t,u,e.entries,u.entries);var c=t.index;t.index=o;var l=c-s;t.writeBits(l,20),t.index=c}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(83),a=r(84),i=r(29);var o,s=new Map([[n.UserMessageType.SayText2,{parser:a.ParseSayText2,encoder:a.EncodeSayText2,name:"sayText2"}],[n.UserMessageType.TextMsg,i.make("textMsg","destType{8}text{s}substitute1{s}substitute2{s}substitute3{s}substitute4{s}","userMessageType",{packetType:"userMessage"})],[n.UserMessageType.ResetHUD,i.make("resetHUD","data{8}","userMessageType",{packetType:"userMessage"})],[n.UserMessageType.Train,i.make("train","data{8}","userMessageType",{packetType:"userMessage"})],[n.UserMessageType.VoiceSubtitle,i.make("voiceSubtitle","client{8}menu{8}item{8}","userMessageType",{packetType:"userMessage"})],[n.UserMessageType.BreakModel_Pumpkin,(o="breakModelPumpkin",{parser:function(e){return{packetType:"userMessage",userMessageType:o,type:n.UserMessagePacketTypeMap.get(o),data:e}},encoder:function(e,t){e.data.index=0,t.writeBitStream(e.data),e.data.index=0},name:o})],[n.UserMessageType.Shake,i.make("shake","command{8}amplitude{f32}frequency{f32}duration{f32}","userMessageType",{packetType:"userMessage"})]]);t.ParseUserMessage=function(e){var t=e.readUint8(),r=e.readBits(11),n=e.readBitStream(r),a=s.get(t);return a?a.parser(n):{packetType:"userMessage",userMessageType:"unknownUserMessage",type:t,data:n}},t.EncodeUserMessage=function(e,t){if("unknownUserMessage"===e.userMessageType)t.writeUint8(e.type),t.writeBits(e.data.length,11),e.data.index=0,t.writeBitStream(e.data),e.data.index=0;else{var r=n.UserMessagePacketTypeMap.get(e.userMessageType);if(!r)throw new Error("Unknown userMessage type ".concat(r));t.writeUint8(r);var a=t.index;t.index+=11;var i=t.index,o=s.get(r);if(!o)throw new Error("No encoder for userMessage ".concat(e.userMessageType,"(").concat(r,")"));o.encoder(e,t);var u=t.index;t.index=a,t.writeBits(u-i,11),t.index=u}}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Geiger=0]="Geiger",e[e.Train=1]="Train",e[e.HudText=2]="HudText",e[e.SayText=3]="SayText",e[e.SayText2=4]="SayText2",e[e.TextMsg=5]="TextMsg",e[e.ResetHUD=6]="ResetHUD",e[e.GameTitle=7]="GameTitle",e[e.ItemPickup=8]="ItemPickup",e[e.ShowMenu=9]="ShowMenu",e[e.Shake=10]="Shake",e[e.Fade=11]="Fade",e[e.VGUIMenu=12]="VGUIMenu",e[e.Rumble=13]="Rumble",e[e.CloseCaption=14]="CloseCaption",e[e.SendAudio=15]="SendAudio",e[e.VoiceMask=16]="VoiceMask",e[e.RequestState=17]="RequestState",e[e.Damage=18]="Damage",e[e.HintText=19]="HintText",e[e.KeyHintText=20]="KeyHintText",e[e.HudMsg=21]="HudMsg",e[e.AmmoDenied=22]="AmmoDenied",e[e.AchievementEvent=23]="AchievementEvent",e[e.UpdateRadar=24]="UpdateRadar",e[e.VoiceSubtitle=25]="VoiceSubtitle",e[e.HudNotify=26]="HudNotify",e[e.HudNotifyCustom=27]="HudNotifyCustom",e[e.PlayerStatsUpdate=28]="PlayerStatsUpdate",e[e.PlayerIgnited=29]="PlayerIgnited",e[e.PlayerIgnitedInv=30]="PlayerIgnitedInv",e[e.HudArenaNotify=31]="HudArenaNotify",e[e.UpdateAchievement=32]="UpdateAchievement",e[e.TrainingMsg=33]="TrainingMsg",e[e.TrainingObjective=34]="TrainingObjective",e[e.DamageDodged=35]="DamageDodged",e[e.PlayerJarated=36]="PlayerJarated",e[e.PlayerExtinguished=37]="PlayerExtinguished",e[e.PlayerJaratedFade=38]="PlayerJaratedFade",e[e.PlayerShieldBlocked=39]="PlayerShieldBlocked",e[e.BreakModel=40]="BreakModel",e[e.CheapBreakModel=41]="CheapBreakModel",e[e.BreakModel_Pumpkin=42]="BreakModel_Pumpkin",e[e.BreakModelRocketDud=43]="BreakModelRocketDud",e[e.CallVoteFailed=44]="CallVoteFailed",e[e.VoteStart=45]="VoteStart",e[e.VotePass=46]="VotePass",e[e.VoteFailed=47]="VoteFailed",e[e.VoteSetup=48]="VoteSetup",e[e.PlayerBonusPoints=49]="PlayerBonusPoints",e[e.SpawnFlyingBird=50]="SpawnFlyingBird",e[e.PlayerGodRayEffect=51]="PlayerGodRayEffect",e[e.SPHapWeapEvent=52]="SPHapWeapEvent",e[e.HapDmg=53]="HapDmg",e[e.HapPunch=54]="HapPunch",e[e.HapSetDrag=55]="HapSetDrag",e[e.HapSet=56]="HapSet",e[e.HapMeleeContact=57]="HapMeleeContact"}(n=t.UserMessageType||(t.UserMessageType={})),function(e){e[e.HUD_PRINTNOTIFY=1]="HUD_PRINTNOTIFY",e[e.HUD_PRINTCONSOLE=2]="HUD_PRINTCONSOLE",e[e.HUD_PRINTTALK=3]="HUD_PRINTTALK",e[e.HUD_PRINTCENTER=4]="HUD_PRINTCENTER"}(t.HudTextLocation||(t.HudTextLocation={})),t.UserMessagePacketTypeMap=new Map([["sayText2",n.SayText2],["textMsg",n.TextMsg],["train",n.Train],["voiceSubtitle",n.VoiceSubtitle],["breakModelPumpkin",n.BreakModel_Pumpkin],["resetHUD",n.ResetHUD],["shake",n.Shake],["unknownUserMessage",-1]])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseSayText2=function(e){var t,r,n,a=e.readUint8(),i=e.readUint8(),o=e.index;if(1===e.readUint8()){if(7===e.readUint8())e.readUTF8String(6);else e.index=o+8;if("*DEAD*"===(r=e.readUTF8String()).substr(0,6)){var s=r.indexOf("\x03"),u=r.indexOf("\x01");t=r.substr(s+1,u-s-1),r=r.substr(u+5),n="TF_Chat_AllDead"}}else e.index=o,n=e.readUTF8String(),t=e.readUTF8String(),r=e.readUTF8String(),e.readUint16();for(var c=(r=(r=r.replace(/\u0001/g,"")).replace(/\u0003/g,"")).indexOf("\x07");-1!==c;)c=(r=r.slice(0,c)+r.slice(c+7)).indexOf("\x07");return{packetType:"userMessage",userMessageType:"sayText2",client:a,raw:i,kind:n,from:t,text:r}},t.EncodeSayText2=function(e,t){if(t.writeUint8(e.client),t.writeUint8(e.raw),"TF_Chat_AllDead"===e.kind){var r="*DEAD* \x03".concat(e.from,"\x01:    ").concat(e.text);t.writeUTF8String(r)}else t.writeUTF8String(e.kind),t.writeUTF8String(e.from),t.writeUTF8String(e.text),t.writeUint16(0)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseVoiceData=function(e){var t=e.readUint8(),r=e.readUint8(),n=e.readUint16();return{packetType:"voiceData",client:t,proximity:r,length:n,data:e.readBitStream(n)}},t.EncodeVoiceData=function(e,t){t.writeUint8(e.client),t.writeUint8(e.proximity),t.writeUint16(e.length),e.data.index=0,t.writeBitStream(e.data,e.length),e.data.index=0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseVoiceInit=function(e){var t=e.readASCIIString(),r=e.readUint8();return{packetType:"voiceInit",codec:t,quality:r,extraData:function(e,t,r){return 255===r?e.readUint16():"vaudio_celt"===t?11025:0}(e,t,r)}},t.EncodeVoiceInit=function(e,t){t.writeASCIIString(e.codec),t.writeUint8(e.quality),255===e.quality&&t.writeUint16(e.extraData)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.StopHandler={parseMessage:function(e){return{type:n.MessageType.Stop,rawData:e.readBitStream(0)}},encodeMessage:function(e,t){}}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=r(3);function i(e){var t={text:e.readUTF8String()};if(e.readBoolean()){var r=e.readUint16();t.extraData=e.readBitStream(8*r)}return t}function o(e,t){t.writeUTF8String(e.text),e.extraData?(t.writeBoolean(!0),t.writeUint16(Math.ceil(e.extraData.length/8)),e.extraData.index=0,t.writeBitStream(e.extraData,e.extraData.length)):t.writeBoolean(!1)}t.StringTableHandler={parseMessage:function(e){for(var t=e.readInt32(),r=e.readInt32(),n=e.readBitStream(8*r),o=n.readUint8(),s=[],u=0;u<o;u++){for(var c=[],l=n.readASCIIString(),f=n.readUint16(),d=0;d<f;d++){var h=i(n);c.push(h)}var p={entries:c,name:l,maxEntries:f,clientEntries:[],compressed:!1};if(n.readBoolean())for(var y=n.readUint16(),v=0;v<y;v++){var g=i(n);p.clientEntries.push(g)}s.push(p)}return{type:a.MessageType.StringTables,tick:t,rawData:n,tables:s}},encodeMessage:function(e,t){t.writeUint32(e.tick);var r=t.index;t.index+=32;var a=t.index;t.writeUint8(e.tables.length);var i,s=n(e.tables);try{for(s.s();!(i=s.n()).done;){var u=i.value;t.writeASCIIString(u.name),t.writeUint16(u.entries.length);var c,l=n(u.entries);try{for(l.s();!(c=l.n()).done;){o(c.value,t)}}catch(y){l.e(y)}finally{l.f()}if(u.clientEntries&&u.clientEntries.length){t.writeBoolean(!0),t.writeUint16(u.clientEntries.length);var f,d=n(u.clientEntries);try{for(d.s();!(f=d.n()).done;){o(f.value,t)}}catch(y){d.e(y)}finally{d.f()}}else t.writeBoolean(!1)}}catch(y){s.e(y)}finally{s.f()}var h=t.index;t.index=r;var p=Math.ceil((h-a)/8);t.writeUint32(p),t.index=a+8*p}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.SyncTickHandler={parseMessage:function(e){var t=e.readInt32();return{type:n.MessageType.SyncTick,tick:t,rawData:e.readBitStream(0)}},encodeMessage:function(e,t){t.writeUint32(e.tick)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.UserCmdHandler={parseMessage:function(e){var t=e.readInt32(),r=e.readInt32(),a=e.readInt32(),i=e.readBitStream(8*a);return{type:n.MessageType.UserCmd,tick:t,rawData:i,sequenceOut:r}},encodeMessage:function(e,t){throw new Error("not implemented")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.TF_COND_AIMIN=1]="TF_COND_AIMIN",e[e.TF_COND_ZOOMED=2]="TF_COND_ZOOMED",e[e.TF_COND_DISGUISING=4]="TF_COND_DISGUISING",e[e.TF_COND_DISGUISED=8]="TF_COND_DISGUISED",e[e.TF_COND_STEALTHED=16]="TF_COND_STEALTHED",e[e.TF_COND_INVULNERABL=32]="TF_COND_INVULNERABL",e[e.TF_COND_TELEPORTED=64]="TF_COND_TELEPORTED",e[e.TF_COND_TAUNTING=128]="TF_COND_TAUNTING",e[e.TF_COND_INVULNERABLE_WEARINGOFF=256]="TF_COND_INVULNERABLE_WEARINGOFF",e[e.TF_COND_STEALTHED_BLIN=512]="TF_COND_STEALTHED_BLIN",e[e.TF_COND_SELECTED_TO_TELEPOR=1024]="TF_COND_SELECTED_TO_TELEPOR",e[e.TF_COND_CRITBOOSTED=2048]="TF_COND_CRITBOOSTED",e[e.TF_COND_TMPDAMAGEBONUS=4096]="TF_COND_TMPDAMAGEBONUS",e[e.TF_COND_FEIGN_DEATH=8192]="TF_COND_FEIGN_DEATH",e[e.TF_COND_PHAS=16384]="TF_COND_PHAS",e[e.TF_COND_STUNNED=32768]="TF_COND_STUNNED",e[e.TF_COND_OFFENSEBUF=65536]="TF_COND_OFFENSEBUF",e[e.TF_COND_SHIELD_CHARG=131072]="TF_COND_SHIELD_CHARG",e[e.TF_COND_DEMO_BUF=262144]="TF_COND_DEMO_BUF",e[e.TF_COND_ENERGY_BUF=524288]="TF_COND_ENERGY_BUF",e[e.TF_COND_RADIUSHEA=1048576]="TF_COND_RADIUSHEA",e[e.TF_COND_HEALTH_BUF=2097152]="TF_COND_HEALTH_BUF",e[e.TF_COND_BURNING=4194304]="TF_COND_BURNING",e[e.TF_COND_HEALTH_OVERHEALE=8388608]="TF_COND_HEALTH_OVERHEALE",e[e.TF_COND_URINE=16777216]="TF_COND_URINE",e[e.TF_COND_BLEEDING=33554432]="TF_COND_BLEEDING",e[e.TF_COND_DEFENSEBUFF=67108864]="TF_COND_DEFENSEBUFF",e[e.TF_COND_MAD_MILK=134217728]="TF_COND_MAD_MILK",e[e.TF_COND_MEGAHEAL=268435456]="TF_COND_MEGAHEAL",e[e.TF_COND_REGENONDAMAGEBUF=536870912]="TF_COND_REGENONDAMAGEBUF",e[e.TF_COND_MARKEDFORDEATH=1073741824]="TF_COND_MARKEDFORDEATH",e[e.TF_COND_NOHEALINGDAMAGEBUF=-2147483648]="TF_COND_NOHEALINGDAMAGEBUF",e[e.TF_COND_SPEED_BOOST=1]="TF_COND_SPEED_BOOST",e[e.TF_COND_CRITBOOSTED_PUMPKIN=2]="TF_COND_CRITBOOSTED_PUMPKIN",e[e.TF_COND_CRITBOOSTED_USER_BUFF=4]="TF_COND_CRITBOOSTED_USER_BUFF",e[e.TF_COND_CRITBOOSTED_DEMO_CHARGE=8]="TF_COND_CRITBOOSTED_DEMO_CHARGE",e[e.TF_COND_CRITBOOSTED_HYPE=16]="TF_COND_CRITBOOSTED_HYPE",e[e.TF_COND_CRITBOOSTED_FIRST_BLOOD=32]="TF_COND_CRITBOOSTED_FIRST_BLOOD",e[e.TF_COND_CRITBOOSTED_BONUS_TIME=64]="TF_COND_CRITBOOSTED_BONUS_TIME",e[e.TF_COND_CRITBOOSTED_CTF_CAPTURE=128]="TF_COND_CRITBOOSTED_CTF_CAPTURE",e[e.TF_COND_CRITBOOSTED_ON_KILL=256]="TF_COND_CRITBOOSTED_ON_KILL",e[e.TF_COND_CANNOT_SWITCH_FROM_MELEE=512]="TF_COND_CANNOT_SWITCH_FROM_MELEE",e[e.TF_COND_DEFENSEBUFF_NO_CRIT_BLOCK=1024]="TF_COND_DEFENSEBUFF_NO_CRIT_BLOCK",e[e.TF_COND_REPROGRAMME=2048]="TF_COND_REPROGRAMME",e[e.TF_COND_CRITBOOSTED_RAGE_BUF=4096]="TF_COND_CRITBOOSTED_RAGE_BUF",e[e.TF_COND_DEFENSEBUFF_HIG=8192]="TF_COND_DEFENSEBUFF_HIG",e[e.TF_COND_SNIPERCHARGE_RAGE_BUFF=16384]="TF_COND_SNIPERCHARGE_RAGE_BUFF",e[e.TF_COND_DISGUISE_WEARINGOF=32768]="TF_COND_DISGUISE_WEARINGOF",e[e.TF_COND_MARKEDFORDEATH_SILENT=65536]="TF_COND_MARKEDFORDEATH_SILENT",e[e.TF_COND_DISGUISED_AS_DISPENSE=131072]="TF_COND_DISGUISED_AS_DISPENSE",e[e.TF_COND_SAPPED=262144]="TF_COND_SAPPED",e[e.TF_COND_INVULNERABLE_HIDE_UNLESS_DAMAGE=524288]="TF_COND_INVULNERABLE_HIDE_UNLESS_DAMAGE",e[e.TF_COND_INVULNERABLE_USER_BUF=1048576]="TF_COND_INVULNERABLE_USER_BUF",e[e.TF_COND_HALLOWEEN_BOMB_HEAD=2097152]="TF_COND_HALLOWEEN_BOMB_HEAD",e[e.TF_COND_HALLOWEEN_THRILLER=4194304]="TF_COND_HALLOWEEN_THRILLER",e[e.TF_COND_RADIUSHEAL_ON_DAMAGE=8388608]="TF_COND_RADIUSHEAL_ON_DAMAGE",e[e.TF_COND_CRITBOOSTED_CARD_EFFECT=16777216]="TF_COND_CRITBOOSTED_CARD_EFFECT",e[e.TF_COND_INVULNERABLE_CARD_EFFECT=33554432]="TF_COND_INVULNERABLE_CARD_EFFECT",e[e.TF_COND_MEDIGUN_UBER_BULLET_RESIST=67108864]="TF_COND_MEDIGUN_UBER_BULLET_RESIST",e[e.TF_COND_MEDIGUN_UBER_BLAST_RESIST=134217728]="TF_COND_MEDIGUN_UBER_BLAST_RESIST",e[e.TF_COND_MEDIGUN_UBER_FIRE_RESIST=268435456]="TF_COND_MEDIGUN_UBER_FIRE_RESIST",e[e.TF_COND_MEDIGUN_SMALL_BULLET_RESIST=536870912]="TF_COND_MEDIGUN_SMALL_BULLET_RESIST",e[e.TF_COND_MEDIGUN_SMALL_BLAST_RESIST=1073741824]="TF_COND_MEDIGUN_SMALL_BLAST_RESIST",e[e.TF_COND_MEDIGUN_SMALL_FIRE_RESIST=-2147483648]="TF_COND_MEDIGUN_SMALL_FIRE_RESIST",e[e.TF_COND_STEALTHED_USER_BUF=1]="TF_COND_STEALTHED_USER_BUF",e[e.TF_COND_MEDIGUN_DEBUF=2]="TF_COND_MEDIGUN_DEBUF",e[e.TF_COND_STEALTHED_USER_BUFF_FADING=4]="TF_COND_STEALTHED_USER_BUFF_FADING",e[e.TF_COND_BULLET_IMMUNE=8]="TF_COND_BULLET_IMMUNE",e[e.TF_COND_BLAST_IMMUNE=16]="TF_COND_BLAST_IMMUNE",e[e.TF_COND_FIRE_IMMUNE=32]="TF_COND_FIRE_IMMUNE",e[e.TF_COND_PREVENT_DEATH=64]="TF_COND_PREVENT_DEATH",e[e.TF_COND_MVM_BOT_STUN_RADIOWAVE=128]="TF_COND_MVM_BOT_STUN_RADIOWAVE",e[e.TF_COND_HALLOWEEN_SPEED_BOOST=256]="TF_COND_HALLOWEEN_SPEED_BOOST",e[e.TF_COND_HALLOWEEN_QUICK_HEAL=512]="TF_COND_HALLOWEEN_QUICK_HEAL",e[e.TF_COND_HALLOWEEN_GIANT=1024]="TF_COND_HALLOWEEN_GIANT",e[e.TF_COND_HALLOWEEN_TINY=2048]="TF_COND_HALLOWEEN_TINY",e[e.TF_COND_HALLOWEEN_IN_HELL=4096]="TF_COND_HALLOWEEN_IN_HELL",e[e.TF_COND_HALLOWEEN_GHOST_MODE=8192]="TF_COND_HALLOWEEN_GHOST_MODE",e[e.TF_COND_MINICRITBOOSTED_ON_KILL=16384]="TF_COND_MINICRITBOOSTED_ON_KILL"}(t.PlayerCondition||(t.PlayerCondition={}))},function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){a=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}r.r(t);var l=r(30),f={pl_badwater_pro_v9:{boundaryMin:{x:-2427,y:-3340},boundaryMax:{x:3785,y:2922}},cp_gullywash_final1:{boundaryMin:{x:-4050,y:-2950},boundaryMax:{x:5432,y:2260}},cp_process_final:{boundaryMin:{x:-5222,y:-3146},boundaryMax:{x:5216,y:3128}},cp_badlands:{boundaryMin:{x:-4285,y:-4898},boundaryMax:{x:2577,y:4858}},pl_upward:{boundaryMin:{x:-2653,y:-4344},boundaryMax:{x:3097,y:2180}},koth_product_rc8:{boundaryMin:{x:-2859,y:-3668},boundaryMax:{x:-171,y:3776}},cp_snakewater_final1:{boundaryMin:{x:-5671,y:-2649},boundaryMax:{x:6687,y:2961}},ultiduo_baloo_v2:{boundaryMin:{x:-1678,y:-1964},boundaryMax:{x:1678,y:1964}},cp_sunshine:{boundaryMin:{x:-8798,y:173},boundaryMax:{x:-2502,y:10279}},cp_metalworks_rc7:{boundaryMin:{x:-3034,y:-6699},boundaryMax:{x:3374,y:4939}},cp_metalworks_f5:{boundaryMin:{x:-3034,y:-6699},boundaryMax:{x:3374,y:4939}},cp_steel:{boundaryMin:{x:-2406,y:-3422},boundaryMax:{x:2924,y:2684}},koth_lakeside_final:{boundaryMin:{x:-4617,y:-2160},boundaryMax:{x:4491,y:1114}},cp_granary_pro_b10:{boundaryMin:{x:-3069,y:-6539},boundaryMax:{x:7,y:6263}},koth_ashville_rc1:{boundaryMin:{x:-1423,y:-3920},boundaryMax:{x:1501,y:3890}},cp_reckoner_b3a:{boundaryMin:{x:-3800,y:-4921},boundaryMax:{x:3794,y:4879}},pl_borneo:{boundaryMin:{x:-3470,y:-8160},boundaryMax:{x:3168,y:3786}},pl_swiftwater_final1:{boundaryMin:{x:408,y:-6128},boundaryMax:{x:6296,y:2624}},ultiduo_grove_b2:{boundaryMin:{x:-2099,y:-1793},boundaryMax:{x:2099,y:1793}},pl_vigil_b2:{boundaryMin:{x:-1019,y:-2070},boundaryMax:{x:4875,y:4784}},koth_bagel_rc4:{boundaryMin:{x:-4286,y:-1234},boundaryMax:{x:4196,y:1150}},ctf_ballin_sky:{boundaryMin:{x:-1024,y:-1504},boundaryMax:{x:1024,y:1504}},koth_ultiduo_r_b7:{boundaryMin:{x:-1337,y:-1313},boundaryMax:{x:1337,y:1313}},koth_warmtic_rc4:{boundaryMin:{x:-1337,y:-4437},boundaryMax:{x:2099,y:4547}},cp_alloy_rc2a:{boundaryMin:{x:-4271,y:-3262},boundaryMax:{x:1801,y:5492}},pl_millstone_ugc_7:{boundaryMin:{x:-3349,y:-1776},boundaryMax:{x:2709,y:4840}},cp_vanguard:{boundaryMin:{x:-5585,y:-1896},boundaryMax:{x:5585,y:1896}},koth_cascade_b6:{boundaryMin:{x:-1682,y:-3807},boundaryMax:{x:1714,y:3735}},koth_coalplant_b8:{boundaryMin:{x:-1513,y:-4089},boundaryMax:{x:1527,y:4083}},koth_ramjam_rc1:{boundaryMin:{x:-3464,y:-1865},boundaryMax:{x:3464,y:1851}},dm_airfusion_final:{boundaryMin:{x:-855,y:-2533},boundaryMax:{x:2315,y:337}},dm_biohazard_cal:{boundaryMin:{x:422,y:366},boundaryMax:{x:2486,y:1942}},dm_caverns_r1:{boundaryMin:{x:-1979,y:-1476},boundaryMax:{x:1091,y:1884}},dm_ethic:{boundaryMin:{x:-1549,y:-1537},boundaryMax:{x:273,y:-19}},dm_killbox_kbh_2p:{boundaryMin:{x:-1510,y:-1017},boundaryMax:{x:1010,y:1017}},dm_lockdown_r6:{boundaryMin:{x:-4670,y:1257},boundaryMax:{x:-2382,y:6343}},dm_lostarena:{boundaryMin:{x:-867,y:-1421},boundaryMax:{x:1277,y:1041}},dm_lostvillage_v3:{boundaryMin:{x:-513,y:-1830},boundaryMax:{x:2163,y:2e3}},dm_tigcrik_r2:{boundaryMin:{x:-1608,y:-402},boundaryMax:{x:264,y:1268}},cp_kalinka:{boundaryMin:{x:-4117,y:-5036},boundaryMax:{x:4117,y:4740}},cp_cardinal:{boundaryMin:{x:-6716,y:-1782},boundaryMax:{x:6716,y:1782}},koth_airfield:{boundaryMin:{x:-3102,y:-2094},boundaryMax:{x:3102,y:2094}}};f.koth_viaduct=f.koth_product_rcx,f.koth_viaduct=f.koth_product_rc8,f.cp_prolands=f.cp_badlands;var d=new Map([["cp_prolands","cp_badlands"]]);function h(e){var t=function(e){if(f[e])return e;var t=function(e){for(;e.lastIndexOf("_")>e.indexOf("_");)e=e.substr(0,e.lastIndexOf("_"));return e},r=t(e);if(f[r])return r;for(var n=0,a=Object.keys(f);n<a.length;n++){var i=a[n];if(t(i)===e)return i}for(var o=0,s=Object.keys(f);o<s.length;o++){var u=s[o];if(t(u)===r)return u}return e}(e),r=d.get(t);return r||t}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _(e){return(_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return!t||"object"!==_(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return function(){var t,r=v(e);if(g()){var n=v(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return m(this,t)}}var w=function(){function e(t,r,n){s(this,e),this.data=[],this.bitWidth=void 0,this.tickCount=void 0,this.valuesPerPlayer=void 0,this.tickCount=t,this.valuesPerPlayer=r,this.bitWidth=n}return c(e,[{key:"makeArray",value:function(){switch(this.bitWidth){case 8:case 16:return new Uint16Array(this.length);case 32:return new Uint32Array(this.length);default:throw new Error("invalid bit width for cache")}}},{key:"getPlayerData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.data[e]){if(!t)return null;this.data[e]=this.makeArray()}return this.data[e]}},{key:"getOffset",value:function(e,t){return e*this.valuesPerPlayer+t}},{key:"get",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.getPlayerData(e,!1);return n?n[this.getOffset(t,r)]:0}},{key:"getOrNull",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.getPlayerData(e,!1);return n?n[this.getOffset(t,r)]:null}},{key:"set",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.getPlayerData(e);a[this.getOffset(t,n)]=r}},{key:"length",get:function(){return this.valuesPerPlayer*this.tickCount}}],[{key:"rehydrate",value:function(t){Object.setPrototypeOf(t,e.prototype)}}]),e}(),b=function(e){y(r,e);var t=T(r);function r(e,n){var a;return s(this,r),(a=t.call(this,e,3,32)).offset=void 0,a.offset=n,a}return c(r,[{key:"getPosition",value:function(e,t){return{x:this.get(e,t,0),y:this.get(e,t,1),z:this.get(e,t,2)}}},{key:"setPosition",value:function(e,t,r){this.set(e,t,r.x-this.offset.x,0),this.set(e,t,r.y-this.offset.y,1),this.set(e,t,r.z-this.offset.z,2)}}],[{key:"rehydrate",value:function(e){Object.setPrototypeOf(e,r.prototype)}}]),r}(w),E=function(e){y(r,e);var t=T(r);function r(e){return s(this,r),t.call(this,e,3,32)}return c(r,[{key:"getAngles",value:function(e,t){return{x:this.get(e,t,0)<<32,y:this.get(e,t,1)<<32,z:this.get(e,t,2)}}},{key:"setAngles",value:function(e,t,r){this.set(e,t,r.x,0),this.set(e,t,r.y,1),this.set(e,t,r.z,2)}}],[{key:"rehydrate",value:function(e){Object.setPrototypeOf(e,r.prototype)}}]),r}(w);function P(e,t,r){return(P="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}var S,O=function(e){y(r,e);var t=T(r);function r(e,n,a,i){var o;return s(this,r),(o=t.call(this,e>>i,n,a)).sparse=void 0,o.sparse=i,o}return c(r,[{key:"getOffset",value:function(e,t){return(e>>this.sparse)*this.valuesPerPlayer+t}}],[{key:"rehydrate",value:function(e){Object.setPrototypeOf(e,r.prototype)}}]),r}(w),I=function(e){y(r,e);var t=T(r);function r(e){return s(this,r),t.call(this,e,1,8,6)}return c(r,[{key:"getMeta",value:function(e,t){var n=P(v(r.prototype),"get",this).call(this,e,t);return{classId:15&n,teamId:(240&n)>>4}}},{key:"setMeta",value:function(e,t,n){P(v(r.prototype),"set",this).call(this,e,t,n.classId|n.teamId<<4)}}],[{key:"rehydrate",value:function(e){Object.setPrototypeOf(e,r.prototype)}}]),r}(O),x=function(e){y(r,e);var t=T(r);function r(e){return s(this,r),t.call(this,e,1,16,2)}return c(r,null,[{key:"rehydrate",value:function(e){Object.setPrototypeOf(e,r.prototype)}}]),r}(O);!function(e){e[e.ALIVE=0]="ALIVE",e[e.DYING=1]="DYING",e[e.DEATH=2]="DEATH",e[e.RESPAWNABLE=3]="RESPAWNABLE"}(S||(S={}));var C=function(){function e(t,r){s(this,e),this.tickCount=void 0,this.positionCache=void 0,this.healthCache=void 0,this.metaCache=void 0,this.viewAnglesCache=void 0,this.uberCache=void 0,this.healTargetCache=void 0,this.connectedCache=void 0,this.tickCount=t,this.positionCache=new b(t,r),this.healthCache=new x(t),this.metaCache=new I(t),this.viewAnglesCache=new E(t),this.uberCache=new O(t,1,8,4),this.healTargetCache=new O(t,1,8,4),this.connectedCache=new O(t,1,8,4)}return c(e,[{key:"setPlayer",value:function(e,t,r,n){if(this.positionCache.setPosition(t,e,r.position),this.viewAnglesCache.setAngles(t,e,r.viewAngles),this.healthCache.set(t,e,r.lifeState===S.ALIVE?r.health:0),this.metaCache.setMeta(t,e,{classId:r.classId,teamId:r.team}),this.connectedCache.set(t,e,n.connected?1:0),n.chargeLevel>0){var a;this.uberCache.set(t,e,n.chargeLevel);try{a=r.weapons.find((function(e){return"CWeaponMedigun"===e.className})).healTarget}catch(i){a=0}this.healTargetCache.set(t,e,a)}}},{key:"getPlayer",value:function(e,t,r){var n=this.metaCache.getMeta(t,e),a=2===n.teamId?"red":3===n.teamId?"blue":"";return{position:this.positionCache.getPosition(t,e),viewAngles:this.viewAnglesCache.getAngles(t,e),user:r,health:this.healthCache.get(t,e),teamId:n.teamId,classId:n.classId,team:a,connected:this.connectedCache.get(t,e),chargeLevel:this.uberCache.getOrNull(t,e),healTarget:this.healTargetCache.getOrNull(t,e)}}}],[{key:"rehydrate",value:function(t){b.rehydrate(t.positionCache),E.rehydrate(t.viewAnglesCache),x.rehydrate(t.healthCache),I.rehydrate(t.metaCache),O.rehydrate(t.uberCache),O.rehydrate(t.healTargetCache),O.rehydrate(t.connectedCache),Object.setPrototypeOf(t,e.prototype)}}]),e}(),B=function(){function e(t,r){s(this,e),this.positionCache=void 0,this.healthCache=void 0,this.levelCache=void 0,this.engineers=0,this.playerIndexMap={},this.positionOffset=void 0,this.angleCache=void 0,this.positionCache=new O(t,2,16,6),this.healthCache=new O(t,1,16,2),this.levelCache=new O(t,1,8,6),this.positionOffset=r,this.angleCache=new O(t,1,16,1)}return c(e,[{key:"getBuildingIndex",value:function(e,t){var r=4*this.playerIndexMap[t];switch(e.type){case"sentry":return r;case"dispenser":return r+1;case"teleporter":return r+(e.isEntrance?2:3)}}},{key:"setBuilding",value:function(e,t,r,n){this.playerIndexMap[r]||(this.playerIndexMap[r]=this.engineers,this.engineers++);var a=this.getBuildingIndex(t,r);this.positionCache.set(a,e,t.position.x-this.positionOffset.x,0),this.positionCache.set(a,e,t.position.y-this.positionOffset.y,1),this.healthCache.set(a,e,t.health),this.levelCache.set(a,e,t.level+(n<<3)),"teleporter"===t.type&&t.yawToExit?this.angleCache.set(a,e,t.angle-t.yawToExit+180):"sentry"===t.type&&this.angleCache.set(a,e,t.angle)}},{key:"getBuilding",value:function(e,t){if(0===this.healthCache.get(t,e))return null;var r=this.levelCache.get(t,e);return{type:t%4,health:this.healthCache.get(t,e),level:7&r,position:{x:this.positionCache.get(t,e,0),y:this.positionCache.get(t,e,1),z:this.positionCache.get(t,e,2)},team:r>>3,angle:this.angleCache.get(t,e)}}},{key:"getBuildings",value:function(e){for(var t=[],r=0;r<this.engineers;r++)for(var n=0;n<4;n++){var a=this.getBuilding(e,4*r+n);a&&t.push(a)}return t}}],[{key:"rehydrate",value:function(t){O.rehydrate(t.positionCache),O.rehydrate(t.healthCache),O.rehydrate(t.levelCache),O.rehydrate(t.angleCache),Object.setPrototypeOf(t,e.prototype)}}]),e}(),D=r(19),M=function(e){y(r,e);var t=T(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,z:0};return s(this,r),(n=t.call(this,e,3,32)).offset=void 0,n.offset=a,n}return c(r,[{key:"getVector",value:function(e,t){return{x:this.get(e,t,0),y:this.get(e,t,1),z:this.get(e,t,2)}}},{key:"setVector",value:function(e,t,r){this.set(e,t,r.x-this.offset.x,0),this.set(e,t,r.y-this.offset.y,1),this.set(e,t,r.z-this.offset.z,2)}}],[{key:"rehydrate",value:function(e){Object.setPrototypeOf(e,r.prototype)}}]),r}(w),k=function(){function e(t,r){s(this,e),this.positionCache=void 0,this.rotationCache=void 0,this.teamNumberCache=void 0,this.typeCache=void 0,this.projectileCount=0,this.projectileEntityMap=void 0,this.positionCache=new M(t,r),this.rotationCache=new M(t),this.teamNumberCache=new O(t,1,8,6),this.typeCache=new O(t,1,8,6),this.projectileEntityMap=new Map}return c(e,[{key:"setProjectile",value:function(e,t,r){this.projectileEntityMap.get(r)||this.projectileEntityMap.set(r,t),this.positionCache.setVector(r,e,t.position),this.rotationCache.setVector(r,e,t.rotation),this.teamNumberCache.set(r,e,t.teamNumber),this.typeCache.set(r,e,t.type)}},{key:"getProjectile",value:function(e,t){if(0===this.positionCache.get(t,e,0))return null;var r=D.ProjectileTypeMap[this.typeCache.get(t,e)];return r?{entityId:t,position:this.positionCache.getVector(t,e),rotation:this.rotationCache.getVector(t,e),teamNumber:this.teamNumberCache.get(t,e),type:r}:null}},{key:"getProjectiles",value:function(e){var t,r=[],n=o(this.projectileEntityMap.entries());try{for(n.s();!(t=n.n()).done;){var a=i(t.value,1)[0],s=this.getProjectile(e,a);s&&r.push(s)}}catch(u){n.e(u)}finally{n.f()}return r}}],[{key:"rehydrate",value:function(t){M.rehydrate(t.positionCache),M.rehydrate(t.rotationCache),O.rehydrate(t.teamNumberCache),O.rehydrate(t.typeCache),Object.setPrototypeOf(t,e.prototype)}}]),e}(),A=function(){function e(t){s(this,e),this.buffer=void 0,this.demo=void 0,this.header=void 0,this.playerCache=void 0,this.entityPlayerReverseMap=new Map,this.nextMappedPlayer=0,this.entityPlayerMap=new Map,this.ticks=void 0,this.match=void 0,this.startTick=0,this.deaths={},this.rounds=void 0,this.buildingCache=void 0,this.projectileCache=void 0,this.buffer=t,this.demo=new l.Demo(t)}return c(e,[{key:"scaleTick",value:function(e){return Math.ceil((e-this.startTick)/2)}},{key:"setTick",value:function(e,t,r,n,a){var s,u=o(t);try{for(u.s();!(s=u.n()).done;){var c=s.value;if("BOT"!==c.user.steamId){var l=this.getPlayerId(c);this.playerCache.setPlayer(e,l,c,n[c.user.entityId])}}}catch(m){u.e(m)}finally{u.f()}var f,d=o(r.values());try{for(d.s();!(f=d.n()).done;){var h=f.value;h.health>0&&this.buildingCache.setBuilding(e,h,h.builder,h.team)}}catch(m){d.e(m)}finally{d.f()}var p,y=o(a.entries());try{for(y.s();!(p=y.n()).done;){var v=i(p.value,2),g=v[0],_=v[1];this.projectileCache.setProjectile(e,_,g)}}catch(m){y.e(m)}finally{y.f()}}},{key:"cacheData",value:function(e){var t=this.demo.getParser(),r=this.demo.getAnalyser(),n=r.getPackets();for(this.header=t.getHeader(),this.match=r.match;0===this.match.world.boundaryMin.x;)n.next();var a=function(e){var t=h(e);return f[t]}(this.header.map);if(!a)throw new Error('Map not supported "'.concat(this.header.map,'".'));for(this.match.world.boundaryMax.x=a.boundaryMax.x,this.match.world.boundaryMax.y=a.boundaryMax.y,this.match.world.boundaryMin.x=a.boundaryMin.x,this.match.world.boundaryMin.y=a.boundaryMin.y;this.match.playerEntityMap.size<1;)n.next();for(var i=0;i<100;i++)n.next();this.startTick=this.match.tick,this.ticks=Math.ceil(this.header.ticks/2),this.playerCache=new C(this.ticks,this.match.world.boundaryMin),this.buildingCache=new B(this.ticks,this.match.world.boundaryMin),this.projectileCache=new k(this.ticks,this.match.world.boundaryMin);var s,u=0,c=0,l=o(n);try{for(l.s();!(s=l.n()).done;){s.value;var d=Math.floor((this.match.tick-this.startTick)/2),p=Math.round(d/this.ticks*100);if(p>c&&(c=p,e(p)),d>u){if(this.setTick(d,Array.from(this.match.playerEntityMap.values()),this.match.buildings,this.match.playerResources,this.match.projectileEntityMap),d>u+1)for(var y=u;y<d;y++)this.setTick(y,Array.from(this.match.playerEntityMap.values()),this.match.buildings,this.match.playerResources,this.match.projectileEntityMap);u=d}}}catch(M){l.e(M)}finally{l.f()}var v,g=o(this.match.rounds);try{for(g.s();!(v=g.n()).done;){var _=v.value,m=this.scaleTick(_.endTick);_.endTick=m}}catch(M){g.e(M)}finally{g.f()}var T,w=o(this.match.deaths);try{for(w.s();!(T=w.n()).done;){var b=T.value,E=this.scaleTick(b.tick);this.deaths[E]||(this.deaths[E]=[]);var P=void 0;try{P=this.match.getPlayerByUserId(b.killer)}catch(A){P=null}var S=null,O=null;try{if(!(S=this.match.getPlayerByUserId(b.victim)))continue}catch(A){continue}try{O=b.assister?this.match.getPlayerByUserId(b.assister):null}catch(A){}var I=P?this.entityPlayerReverseMap.get(P.user.steamId):null,x=O?this.entityPlayerReverseMap.get(O.user.steamId):null,D=this.entityPlayerReverseMap.get(S.user.steamId);this.deaths[E].push({tick:E,victim:S,killer:P,assister:O,weapon:b.weapon,victimTeam:this.playerCache.metaCache.getMeta(D,E).teamId,assisterTeam:x?this.playerCache.metaCache.getMeta(x,E).teamId:0,killerTeam:I?this.playerCache.metaCache.getMeta(I,E).teamId:0})}}catch(M){w.e(M)}finally{w.f()}}},{key:"getPlayerId",value:function(e){return this.entityPlayerReverseMap.has(e.user.steamId)||(this.entityPlayerMap.set(this.nextMappedPlayer,e),this.entityPlayerReverseMap.set(e.user.steamId,this.nextMappedPlayer),this.nextMappedPlayer++),this.entityPlayerReverseMap.get(e.user.steamId)}},{key:"getPlayersAtTick",value:function(e){for(var t=[],r=0;r<this.nextMappedPlayer;r++){var n=this.entityPlayerMap.get(r);n&&t.push(this.playerCache.getPlayer(e,r,n.user))}return t}},{key:"getBuildingAtTick",value:function(e){return this.buildingCache.getBuildings(e)}}]),e}();onmessage=function(e){var t=e.data.buffer,r=new A(t);try{r.cacheData((function(e){postMessage({progress:e})}))}catch(i){return console.error(i),void postMessage({error:i.message})}var n={ticks:r.ticks,header:r.header,playerCache:r.playerCache,buildingCache:r.buildingCache,projectileCache:r.projectileCache,deaths:r.deaths,intervalPerTick:2*r.match.intervalPerTick,world:r.match.world,rounds:r.match.rounds,nextMappedPlayer:r.nextMappedPlayer,entityPlayerMap:r.entityPlayerMap,now:performance.now()},a=[];a=(a=(a=(a=(a=a.concat(r.playerCache.positionCache.data.map((function(e){return e.buffer})))).concat(r.playerCache.viewAnglesCache.data.map((function(e){return e.buffer})))).concat(r.playerCache.healthCache.data.map((function(e){return e.buffer})))).concat(r.playerCache.metaCache.data.map((function(e){return e.buffer})))).concat(r.playerCache.connectedCache.data.map((function(e){return e.buffer}))),postMessage(n,a)}}]);
//# sourceMappingURL=0d881c0827014bf79d22.worker.js.map